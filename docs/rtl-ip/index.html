<!DOCTYPE html>





    

    

    

    

    

<html lang="en"><head>
    <meta charset="utf-8" />
    <title>RTL IP | </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RTL IP">
    <meta name="keywords" content="Documentation, Hugo, Hugo Theme, Bootstrap" />
    <meta name="author" content="Colin Wilson - Lotus Labs" />
    <meta name="email" content="support@aigis.uk" />
    <meta name="website" content="https://lotusdocs.dev" />
    <meta name="Version" content="v0.1.0" />
    
    <link rel="icon" href="https://egghwan.github.io/favicon.ico" sizes="any">
<link rel="icon" type="image/svg+xml" href="https://egghwan.github.io/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="https://egghwan.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://egghwan.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://egghwan.github.io/favicon-16x16.png">
<link rel="manifest" crossorigin="use-credentials" href="https://egghwan.github.io/site.webmanifest">
<meta property="og:title" content="RTL IP" />
<meta property="og:description" content="RTL IP" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://egghwan.github.io/docs/rtl-ip/" /><meta property="og:image" content="https://egghwan.github.io/opengraph/card-base-2_hu_9e530190b50201a5.png"/><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://egghwan.github.io/opengraph/card-base-2_hu_9e530190b50201a5.png"/>
<meta name="twitter:title" content="RTL IP"/>
<meta name="twitter:description" content="RTL IP"/>

    
    
    <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>
    
    
            
                
                <script type="text/javascript" src="https://egghwan.github.io/docs/js/flexsearch.bundle.min.f5159d5a2151ffbb653996ec17eaff7da4e04c286bd879fc41839d36a5586f3f20eaead0b6089de48f9adc669cdee771.js" integrity="sha384-9RWdWiFR/7tlOZbsF&#43;r/faTgTChr2Hn8QYOdNqVYbz8g6urQtgid5I&#43;a3Gac3udx" crossorigin="anonymous"></script>
                
        
    
    

    <link rel="stylesheet" href="/docs/scss/style.min.0dd19585783190e3219032920f3a0497a073adc641fd4386e14968b027b323d586f5c3ad89ac285595ec9b82b9d8273b.css" integrity="sha384-DdGVhXgxkOMhkDKSDzoEl6BzrcZB/UOG4UlosCezI9WG9cOtiawoVZXsm4K52Cc7"crossorigin="anonymous">
    
    
    
    </head>
<body>
        <div class="content">
            <div class="page-wrapper toggled">
<nav id="sidebar" class="sidebar-wrapper">
    <div class="sidebar-brand">
        <a href='/' aria-label="HomePage" alt="HomePage">
            
                <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
            
        </a>
    </div>
    <div class="sidebar-content" style="height: calc(100% - 131px);">
        <ul class="sidebar-menu">
            
                
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">quick_reference_all</i>
                                Digital-Signal-Processing
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/dsp/decimation_downsampling/">Decimation vs Down-sampling</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/dsp/fir_filter/">FIR Filter</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/dsp/interpolation_upsampling/">Interpolation vs Upsampling</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">quick_reference_all</i>
                                FPGA Demo
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/fpga-demo/axi4-lite-led_demo/">AXI4-Lite LED Demo</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/fpga-demo/i2c_interface_demo/">I2C Protocol Demo</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/fpga-demo/petalinux_build_demo/">Petalinux Build Demo (Zybo-z7-10)</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  current active">
                            <button class="btn">
                                <i class="material-icons me-2">edit</i>
                                RTL IP
                            </button>
                            <div class="sidebar-submenu d-block">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/rtl-ip/lib_async_fifo/">lib_axis_fifo_async.v</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/rtl-ip/lib_sync_fifo/">lib_axis_fifo_sync.v</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/rtl-ip/mermaid/">Mermaid</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">folder</i>
                                Section Folder
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class="sidebar-dropdown nested  ">
                                                <button class="btn">
                                                    
                                                    Section Subfolder
                                                </button>
                                                <div class="sidebar-submenu ">
                                                    <ul>
                                                        
                                                            
                                                            
                                                                <li class="sidebar-dropdown nested  ">
                                                                    <button class="btn">
                                                                        
                                                                        Second Section Subfolder
                                                                    </button>
                                                                    <div class="sidebar-submenu ">
                                                                        <ul>
                                                                            
                                                                                
                                                                                
                                                                                    <li class="sidebar-dropdown nested  ">
                                                                                        <button class="btn">
                                                                                            
                                                                                            Third Section Subfolder
                                                                                        </button>
                                                                                        <div class="sidebar-submenu ">
                                                                                            <ul>
                                                                                                
                                                                                                    
                                                                                                    <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/section-folder/section-subfolder/second-section-subfolder/third-section-subfolder/example-doc/">Example Doc</a></li>
                                                                                                
                                                                                            </ul>
                                                                                        </div>
                                                                                    </li>
                                                                                
                                                                            
                                                                        </ul>
                                                                    </div>
                                                                </li>
                                                            
                                                        
                                                    </ul>
                                                </div>
                                            </li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">tune</i>
                                Terms
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/terms/pl_region/">PL</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/terms/ps_region/">PS</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/terms/wsl/">WSL</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
                    
                    
                        <li class="sidebar-dropdown  ">
                            <button class="btn">
                                <i class="material-icons me-2">tune</i>
                                Wireless Communications
                            </button>
                            <div class="sidebar-submenu ">
                                <ul>
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/wireless_communication/3_6_pulse_shaping_filter/">3.06 Pulse Shaping Filter</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/wireless_communication/3_7_quadrature-amplitude-modulation---%EB%B3%B5%EC%82%AC%EB%B3%B8/">3.07 Quadrature Amplitude Modulation (QAM)</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/wireless_communication/3_10_computing_error_rates/">3.10 Computing Error Rates</a></li>
                                        
                                    
                                        
                                        
                                            <li class=" "><a class="sidebar-nested-link" href="https://egghwan.github.io/docs/wireless_communication/4_02_basic-componets-of-a-pll/">4.2 Basic Components of a PLL</a></li>
                                        
                                    
                                </ul>
                            </div>
                        </li>
                    
                
            
        </ul>
        
    </div>
    
        <ul class="sidebar-footer list-unstyled mb-0">
            
        </ul>
    
</nav>

                    <main class="page-content bg-transparent">
                        
<div id="top-header" class="top-header d-print-none">
    <div class="header-bar d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <a href='/' class="logo-icon me-3" aria-label="HomePage" alt="HomePage">
                <div class="small">
                    
                            <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
                    
                </div>
                <div class="big">
                    
                            <?xml version="1.0" encoding="UTF-8"?><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 250"><path d="m143,39.5c-18,0-18,18-18,18,0,0,0-18-18-18H22c-2.76,0-5,2.24-5,5v143c0,2.76,2.24,5,5,5h76c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h76c2.76,0,5-2.24,5-5V44.5c0-2.76-2.24-5-5-5h-85Zm63,123.5c0,1.38-1.12,2.5-2.5,2.5h-60.5c-18,0-18,18-18,18,0,0,0-18-18-18h-60.5c-1.38,0-2.5-1.12-2.5-2.5v-94c0-1.38,1.12-2.5,2.5-2.5h51.5c7.2,0,8.64,11.52,8.93,16.13.07,1.05.95,1.87,2,1.87h32.14c1.06,0,1.94-.82,2-1.87.29-4.61,1.73-16.13,8.93-16.13h51.5c1.38,0,2.5,1.12,2.5,2.5v94Z" style="fill:#06f;"/></svg>
                    
                </div>
            </a>
            <button id="close-sidebar" class="btn btn-icon btn-soft">
                <span class="material-icons size-20 menu-icon align-middle">menu</span>
            </button>
            
            
                    
                    <button id="flexsearch-button" class="ms-3 btn btn-soft" data-bs-toggle="collapse" data-bs-target="#FlexSearchCollapse" aria-expanded="false" aria-controls="FlexSearchCollapse">
                        <span class="material-icons size-20 menu-icon align-middle">search</span>
                        <span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span>
                        <div class="d-none d-sm-block">
                            <span class="flexsearch-button-keys">
                                <kbd class="flexsearch-button-cmd-key">
                                    <svg width="44" height="15"><path d="M2.118,11.5A1.519,1.519,0,0,1,1,11.042,1.583,1.583,0,0,1,1,8.815a1.519,1.519,0,0,1,1.113-.458h.715V6.643H2.118A1.519,1.519,0,0,1,1,6.185,1.519,1.519,0,0,1,.547,5.071,1.519,1.519,0,0,1,1,3.958,1.519,1.519,0,0,1,2.118,3.5a1.519,1.519,0,0,1,1.114.458A1.519,1.519,0,0,1,3.69,5.071v.715H5.4V5.071A1.564,1.564,0,0,1,6.976,3.5,1.564,1.564,0,0,1,8.547,5.071,1.564,1.564,0,0,1,6.976,6.643H6.261V8.357h.715a1.575,1.575,0,0,1,1.113,2.685,1.583,1.583,0,0,1-2.227,0A1.519,1.519,0,0,1,5.4,9.929V9.214H3.69v.715a1.519,1.519,0,0,1-.458,1.113A1.519,1.519,0,0,1,2.118,11.5Zm0-.857a.714.714,0,0,0,.715-.714V9.214H2.118a.715.715,0,1,0,0,1.429Zm4.858,0a.715.715,0,1,0,0-1.429H6.261v.715a.714.714,0,0,0,.715.714ZM3.69,8.357H5.4V6.643H3.69ZM2.118,5.786h.715V5.071a.714.714,0,0,0-.715-.714.715.715,0,0,0-.5,1.22A.686.686,0,0,0,2.118,5.786Zm4.143,0h.715a.715.715,0,0,0,.5-1.22.715.715,0,0,0-1.22.5Z" fill="currentColor"></path><path d="M12.4,11.475H11.344l3.879-7.95h1.056Z" fill="currentColor"></path><path d="M25.073,5.384l-.864.576a2.121,2.121,0,0,0-1.786-.923,2.207,2.207,0,0,0-2.266,2.326,2.206,2.206,0,0,0,2.266,2.325,2.1,2.1,0,0,0,1.782-.918l.84.617a3.108,3.108,0,0,1-2.622,1.293,3.217,3.217,0,0,1-3.349-3.317,3.217,3.217,0,0,1,3.349-3.317A3.046,3.046,0,0,1,25.073,5.384Z" fill="currentColor"></path><path d="M30.993,5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172Z" fill="currentColor"></path><path d="M34.67,4.164c1.471,0,2.266.658,2.266,1.851,0,1.087-.832,1.809-2.134,1.855l2.107,2.691h-1.28L33.591,7.87H33.07v2.691H32.038v-6.4Zm-1.6.969v1.8h1.572c.832,0,1.22-.3,1.22-.918s-.411-.882-1.22-.882Z" fill="currentColor"></path><path d="M42.883,10.561H38.31v-6.4h1.033V9.583h3.54Z" fill="currentColor"></path></svg>
                                </kbd>
                                <kbd class="flexsearch-button-key">
                                    <svg width="15" height="15"><path d="M5.926,12.279H4.41L9.073,2.721H10.59Z" fill="currentColor"/></svg>
                                </kbd>
                            </span>
                        </div>
                    </button>
                    
                
            </div>

        <div class="d-flex align-items-center">
            <ul class="list-unstyled mb-0">
                
            </ul>
            <button id="mode" class="btn btn-icon btn-default ms-2" type="button" aria-label="Toggle user interface mode">
                <span class="toggle-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentColor">
                        <title>Enable dark mode</title>
                        <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-7.5 5.25-12.75T24 6q.4 0 .85.025.45.025 1.15.075-1.8 1.6-2.8 3.95-1 2.35-1 4.95 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6 0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z"/>
                    </svg>
                </span>
                <span class="toggle-light">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentColor">
                        <title>Enable light mode</title>
                        <path d="M24 31q2.9 0 4.95-2.05Q31 26.9 31 24q0-2.9-2.05-4.95Q26.9 17 24 17q-2.9 0-4.95 2.05Q17 21.1 17 24q0 2.9 2.05 4.95Q21.1 31 24 31Zm0 3q-4.15 0-7.075-2.925T14 24q0-4.15 2.925-7.075T24 14q4.15 0 7.075 2.925T34 24q0 4.15-2.925 7.075T24 34ZM3.5 25.5q-.65 0-1.075-.425Q2 24.65 2 24q0-.65.425-1.075Q2.85 22.5 3.5 22.5h5q.65 0 1.075.425Q10 23.35 10 24q0 .65-.425 1.075-.425.425-1.075.425Zm36 0q-.65 0-1.075-.425Q38 24.65 38 24q0-.65.425-1.075.425-.425 1.075-.425h5q.65 0 1.075.425Q46 23.35 46 24q0 .65-.425 1.075-.425.425-1.075.425ZM24 10q-.65 0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 10 24 10Zm0 36q-.65 0-1.075-.425-.425-.425-.425-1.075v-5q0-.65.425-1.075Q23.35 38 24 38q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46ZM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05 0 .6-.4 1-.4.45-1.025.45-.625 0-1.075-.4Zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45ZM33.9 14.1q-.45-.45-.45-1.05 0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4-.625 0-1.075-.4ZM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6 0 1.05.45.45.45.45 1.05 0 .6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425ZM24 24Z"/>
                    </svg>
                </span>
            </button>
            
            
        </div>
    </div>
    
    
            <div class="collapse" id="FlexSearchCollapse">
                <div class="flexsearch-container">
                    <div class="flexsearch-keymap">
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to navigate</span>
                        </li>
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to select</span>
                        </li>
                        <li>
                            <kbd class="flexsearch-button-cmd-key"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd>
                            <span class="flexsearch-key-label">to close</span>
                        </li>
                    </div>
                    <form class="flexsearch position-relative flex-grow-1 ms-2 me-2">
                        <div class="d-flex flex-row">
                            <input id="flexsearch" class="form-control" type="search" placeholder="Search" aria-label="Search" autocomplete="off">
                            <button id="hideFlexsearch" type="button" class="ms-2 btn btn-soft">
                                cancel
                            </button>
                        </div>
                        <div id="suggestions" class="shadow rounded-1 d-none"></div>
                    </form>
                </div>
            </div>
        
    
    
</div>


                            <div class="container-fluid">
                                <div class="layout-spacing">
                                    
                                        <div class="d-md-flex justify-content-between align-items-center"><nav aria-label="breadcrumb" class="d-inline-block pb-2 mt-1 mt-sm-0">
    <ul id="breadcrumbs" class="breadcrumb bg-transparent mb-0" itemscope itemtype="https://schema.org/BreadcrumbList">
        
            
                <li class="breadcrumb-item text-capitalize active" aria-current="page" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/docs/">
                        <i class="material-icons size-20 align-text-bottom" itemprop="name">Home</i>
                    </a>
                    <meta itemprop="position" content='1' />
                </li>
            
        
            <li class="breadcrumb-item text-capitalize active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                <span itemprop="name">RTL IP</span>
                <meta itemprop="position" content='2' />
            </li>
        
    </ul>
</nav></div>
                                    
                                    <div class="row flex-xl-nowrap">
                                        
                                        <div class="docs-toc col-xl-3 visually-hidden visually-hidden  d-xl-block"><toc>
    <div class="fw-bold text-uppercase mb-2">On this page</div>
    <nav id="TableOfContents"></nav>
    </toc></div>
                                        
                                        
                                        <div class="docs-toc-mobile visually-hidden visually-hidden  d-print-none d-xl-none">
                                            <button id="toc-dropdown-btn" class="btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" data-bs-offset="0,0" aria-expanded="false">
                                                Table of Contents
                                            </button>
<nav id="toc-mobile"></nav></div>
                                        <div class="docs-content col-12  mt-0">
                                            <div class="mb-0 d-flex">
                                                
                                                <i class="material-icons title-icon me-2">edit</i>
                                                
                                                <h1 class="content-title mb-0">
                                                    RTL IP
                                                    
                                                </h1>
                                            </div>
                                            
                                            <div id="content" class="main-content" >
                                                
    <div class="row flex-xl-wrap">
        
        <div id="list-item" class="col-md-4 col-12 mt-4 pt-2">
            <a class="text-decoration-none text-reset" href="https://egghwan.github.io/docs/rtl-ip/lib_async_fifo/">
                <div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1">
                    <span class="icon-color d-flex my-3">
                        <i class="material-icons align-middle">code</i>
                        
                        
                    </span>
                    <div class="card-body p-0 content">
                        <p class="fs-5 fw-semibold card-title mb-1">lib_axis_fifo_async.v</p>
                        <p class="para card-text mb-0"></p>
                    </div>
                    
                </div>
            </a>
        </div>
        
        <div id="list-item" class="col-md-4 col-12 mt-4 pt-2">
            <a class="text-decoration-none text-reset" href="https://egghwan.github.io/docs/rtl-ip/lib_sync_fifo/">
                <div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1">
                    <span class="icon-color d-flex my-3">
                        <i class="material-icons align-middle">code</i>
                        
                        
                    </span>
                    <div class="card-body p-0 content">
                        <p class="fs-5 fw-semibold card-title mb-1">lib_axis_fifo_sync.v</p>
                        <p class="para card-text mb-0"></p>
                    </div>
                    
                </div>
            </a>
        </div>
        
        <div id="list-item" class="col-md-4 col-12 mt-4 pt-2">
            <a class="text-decoration-none text-reset" href="https://egghwan.github.io/docs/rtl-ip/mermaid/">
                <div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1">
                    <span class="icon-color d-flex my-3">
                        <i class="material-icons align-middle">function</i>
                        
                        
                    </span>
                    <div class="card-body p-0 content">
                        <p class="fs-5 fw-semibold card-title mb-1">Mermaid</p>
                        <p class="para card-text mb-0">Example Mermaid diagrams</p>
                    </div>
                    
                </div>
            </a>
        </div>
        
    </div>

                                            </div>
                                            <div><hr class="doc-hr">
<div id="doc-nav" class="d-print-none">
</div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
<footer class="shadow py-3 d-print-none">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col">
                <div class="text-sm-start text-center mx-md-2">
                    <p class="mb-0">
                        
                        © 2025 egghwan. All contents protected
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>
</main>
            </div>
        </div>

        
        
        <button onclick="topFunction()" id="back-to-top" aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12,10.224l-6.3,6.3L4.32,15.152,12,7.472l7.68,7.68L18.3,16.528Z" style="fill:#fff"/></svg></button>
        
        

        
        
            <script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script>
        




    
    
    






    

    <script src="/docs/js/bootstrap.c7927bdd82eceb076739257add3f4b0e11379da037c07d5c7110daeb6de0e3edcb2de867604550f88815157e4ec4ddb7.js" integrity="sha384-x5J73YLs6wdnOSV63T9LDhE3naA3wH1ccRDa623g4&#43;3LLehnYEVQ&#43;IgVFX5OxN23"defer></script>


    <script type="text/javascript" src="https://egghwan.github.io/docs/js/bundle.min.4b07706b1da436c9600e641a8cf51af20b3e497ead85e0d0af7552a0314e8e317dc63bb69d12c072092518621478900d.js" integrity="sha384-Swdwax2kNslgDmQajPUa8gs&#43;SX6theDQr3VSoDFOjjF9xju2nRLAcgklGGIUeJAN" crossorigin="anonymous" defer></script>

        

        
        <script type="module">
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


    

    

    index.add(
            {
                id:  0 ,
                href: "\/docs\/dsp\/",
                title: "Digital-Signal-Processing",
                description: "Digital-Signal-Processign",
                content: ""
            }
        );
    index.add(
            {
                id:  1 ,
                href: "\/docs\/fpga-demo\/",
                title: "FPGA Demo",
                description: "FPGA Demo",
                content: ""
            }
        );
    index.add(
            {
                id:  2 ,
                href: "\/docs\/rtl-ip\/",
                title: "RTL IP",
                description: "RTL IP",
                content: ""
            }
        );
    index.add(
            {
                id:  3 ,
                href: "\/docs\/fpga-demo\/axi4-lite-led_demo\/",
                title: "AXI4-Lite LED Demo",
                description: " 1. 데모 설명 linkAXI4-LITE 프로토콜을 활용하여 FPGA의 PS-PL간 인터페이스 연결을 수행하여 PS에서 PL영역의 LED를 켜거나 끄는 명령을 내리고, PS에서 PL영역의 LED의 현재 상태를 읽어오는 데모에 대해 기술한다.\n보드는 Zybo-Z7-10 보드를 활용하지만 다른 보드에도 응용 가능하다.\n해당 데모를 수행하기 위해 FPGA에 Petalinux가 빌드되어 있어야 한다. (Petalinux 빌드 참고 링크)\n",
                content: " 1. 데모 설명 linkAXI4-LITE 프로토콜을 활용하여 FPGA의 PS-PL간 인터페이스 연결을 수행하여 PS에서 PL영역의 LED를 켜거나 끄는 명령을 내리고, PS에서 PL영역의 LED의 현재 상태를 읽어오는 데모에 대해 기술한다.\n보드는 Zybo-Z7-10 보드를 활용하지만 다른 보드에도 응용 가능하다.\n해당 데모를 수행하기 위해 FPGA에 Petalinux가 빌드되어 있어야 한다. (Petalinux 빌드 참고 링크)\nPetalinux가 없다면 Vitis를 활용해 해당 데모를 재현할 수 있다.\n2. Background linkFPGA로 제품을 구현할 때, "
            }
        );
    index.add(
            {
                id:  4 ,
                href: "\/docs\/dsp\/decimation_downsampling\/",
                title: "Decimation vs Down-sampling",
                description: " 1. 문서 설명 link신호처리를 할 때 Decimation과 down-sampling는 헷갈리는 개념이다.\nDecimation과 down-sampling의 의미에 대해 알아보고, 신호처리 관점 및 RTL구현 관점에서 해당 개념을 기술한다.\n2. 정의 link Decimation : 디지털 신호를 먼저 Low-Pass-Filtering(LPF)를 수행하고, 디지털 신호를 구성하는 샘플들 중 특정 간격의 샘플만 취한다.\ndown-sampling : 디지털 신호를 구성하는 샘플들 중 특정 간격의 샘플만 취하고 끝난다.\n",
                content: " 1. 문서 설명 link신호처리를 할 때 Decimation과 down-sampling는 헷갈리는 개념이다.\nDecimation과 down-sampling의 의미에 대해 알아보고, 신호처리 관점 및 RTL구현 관점에서 해당 개념을 기술한다.\n2. 정의 link Decimation : 디지털 신호를 먼저 Low-Pass-Filtering(LPF)를 수행하고, 디지털 신호를 구성하는 샘플들 중 특정 간격의 샘플만 취한다.\ndown-sampling : 디지털 신호를 구성하는 샘플들 중 특정 간격의 샘플만 취하고 끝난다.\nDecimation과 down-sampling의 차이는 LPF를 수행하냐 안 하냐의 차이다. 아래 섹션에서 자세히 알아보자.\n3. 상황 가정 및 문제 link두 개념의 차이를 설명하기 위해 아래와 같은 상황을 가정해보자.\n내가 사용하는 신호 : 중심 주파수가 150Hz이고 대역폭이 143.75Hz인 대역 신호\n남이 사용하는 신호 : 중심 주파수가 400Hz이고 대역폭이 143.75Hz인 대역 신호\n수신 신호 : 내가 사용하는 신호 + 남이 사용하는 신호 (노이즈는 없다고 가정하자, 남의 신호를 노이즈라고 가정해도 된다.)\n샘플링 클럭 : 1kHz\n수신 신호를 facotr = 2로 Decimation 하는 상황\n샘플링 클럭을 낮춰 수신 신호를 처리하면 구현 관점에서 전력, 발열에 유리하다. 그래서 수신 신호를 Decimation하는 상황을 가정했다.\n샘플링 클럭을 낮추기 위해서 단순히 시간 축에서 특정 간격의 샘플만 선택하는 down-sampling이면 충분할까? 답은 아니다.\n그 이유를 신호처리 관점에서 이해해보자.\n4. 신호처리 관점 link4.1 스펙트럼 분석 link주파수 영역에서 신호를 분석하면 두 개념의 차이를 쉽게 이해할 수 있다. 아래 그림은 수신 신호의 스펙트럼이다.\n파란색 신호는 내가 만든 신호고, 빨간색 신호는 남이 만든 신호다. 발열을 낮추기 위해 수신 신호를 절반의 샘플링 클럭인 500Hz로 down-sampling을 해보자.\n아래 스펙트럼은 시간 축에서 수신 신호의 샘플을 2개 간격으로 선택하여 샘플링 클럭을 500MHz로 낮춘 신호다.\n보다시피 빨간색인 남이 만든 신호가 Aliasing이 일어나 내 신호를 간섭하는 것을 확인할 수 있다. 여기서 간단히 Aliasing이 일어난 과정을 알아보자.\n샘플링 클럭이 500MHz이므로 유효 주파수 대역은 그 절반인 250MHz다. 따라서 250MHz 이상의 신호 성분은 0~250MHz 영역으로 Aliasing이 일어나게 된다.\n400Mhz 신호는 250MHz기준 오른쪽으로 150Mhz 떨어져 있기 때문에 250MHz를 기준으로 왼쪽으로 150MHz만큼 떨어진 100MHz에 Aliasing이 일어난다.\n결과적으로 down-sampling 이전에는 신호들이 서로 분리되어 간섭을 주지 않았지만, down-sampling 이후에는 신호들이 서로 간섭한다.\n4.2 Low-Pass-Filtering의 필요성 link4.1에서 살펴봤듯이 down-sampling에 의해 aliasing되는 신호 때문에 내 신호에 간섭이 발생할 수 있다.\n따라서 2개 간격으로 샘플을 선택하는 down-sampling을 하기 이전에 먼저 간섭이 될 수 있는 신호를 제거해야한다. 이를 위해 먼저 LPF를 통과 시킨다.\nDecimation Factor가 2이므로 Passband가 250MHz인 LPF를 적용한다.\n아래 그림은 LPF를 거친 수신 신호의 스펙트럼이다. (아직 샘플링 클럭은 1kHz다.)\nLPF를 거친 이후에, 신호를 2개 샘플 간격으로 선택하는 down-sampling을 진행한다.\n아래 그림은 LPF를 한 후, down-sampling을 진행한 스펙트럼이다.\n그림에서 알 수 있듯이, 단순히 down-sampling을 진행했을 때보다. Decimation(LPF + down-sampling)을 진행했을 때, 내 신호에 대한 간섭이 줄어 들었음을 확인할 수 있다.\n4.3 MATLAB CODE link 1close all; 2clear all; 3 4%% Set Simulation Parameter 5fs = 1000; % SampleRate 6sps = 8; % SampleperSym 7beta = 0.15; % RRC roll-off 8span = 10; % filter span (심볼 단위) 9NFFT = 2^15; % FFT Size 10 11t = 0:1/fs:5; % Continuous Time index 12f = linspace(-fs/2, fs/2, NFFT); % Discrete-Frequency axis (SampleRate) 13f_down = linspace(-fs/4, fs/4, NFFT); % Discrete-Frequency axis (Downsample) 14%% RRC pulse shaping 필터 생성 15rrc_filter = rcosdesign(beta, span, sps, 'normal'); % (RRC Filter coeffs) 16 17%% Create My Signal 18my_bits = 2*randi([0 1], 1, 500)-1; % BPSK Modulation 19my_upsampled = upsample(my_bits, sps); % upsampling 20my_shaped = conv(my_upsampled, rrc_filter, 'same'); % RRC Pulse shaping 21 22fc1 = 150; % My Signal Center Freq 23my_sig = my_shaped .* cos(2*pi*fc1*t(1:length(my_shaped))); % Upconversion 24 25%% Create Other Signal 26other_bits = 2*randi([0 1], 1, 500)-1; % BPSK Modulation 27other_upsampled = upsample(other_bits, sps); % upsampling 28other_shaped = conv(other_upsampled, rrc_filter, 'same'); % RRC Pulse shaping 29 30fc2 = 400; % Ohter signal Center Freq 31other_sig = other_shaped .* cos(2*pi*fc2*t(1:length(other_shaped))); % Upconversion 32 33%% rx_sig 34rx_sig = my_sig + other_sig; 35 36%% rx_sig spectrum 37figure; 38fft_my = 20*log10(abs(fftshift(fft(my_sig,NFFT)))); 39fft_other = 20*log10(abs(fftshift(fft(other_sig,NFFT)))); 40 41plot(f, fft_my); 42hold on; 43plot(f, fft_other,'r'); 44title('rx sig'); 45xlabel('Frequency (Hz)'); 46legend('내 신호','남의 신호'); 47 48%% Downsampling 49down_my = my_sig(1:2:end); % my_signal downsampling 50down_other = other_sig(1:2:end); % other_signal downsampling 51down_rx = down_my + down_other; % rx_signal downsampling 52 53fft_down_my = 20*log10(abs(fftshift(fft(down_my,NFFT)))); 54fft_down_other = 20*log10(abs(fftshift(fft(down_other,NFFT)))); 55 56%% Downsampling spectrum 57figure; 58plot(f_down, fft_down_my); 59hold on; 60plot(f_down, fft_down_other,'r') 61title('Downsampled Spectrum (Aliased \u0026 Overlapped)'); 62xlabel('Frequency (Hz)'); 63legend('내 신호','남의 신호'); 64 65%% Decimation 66lpf_my = lowpass(my_sig, 0.5); % my_signal LPF filtering 67lpf_other = lowpass(other_sig, 0.5);% other_signal LPF filtering 68 69deci_my = lpf_my(1:2:end); % my_signal downsampling 70deci_other = lpf_other(1:2:end); % other_signal downsampling 71 72 73fft_lpf_rx = 20*log10(abs(fftshift(fft(lpf_my,NFFT)))); 74fft_lpf_other = 20*log10(abs(fftshift(fft(lpf_other,NFFT)))); 75 76fft_deci_my = 20*log10(abs(fftshift(fft(deci_my,NFFT)))); 77fft_deci_other = 20*log10(abs(fftshift(fft(deci_other,NFFT)))); 78 79%% LPF Spectrum 80figure; 81plot(f, fft_lpf_rx); 82hold on; 83plot(f, fft_lpf_other); 84title('After LPF Spectrum') 85xlabel('주파수 (Hz)'); 86legend('내 신호', '남의 신호'); 87 88%% Decimation(LPF + downsampling) spectrum 89figure; 90plot(f_down, fft_deci_my); 91hold on; 92plot(f_down, fft_deci_other,'r'); 93title('Decimation Spectrum') 94xlabel('주파수 (Hz)'); 95legend('내 신호', '남의 신호'); 해당 예제를 모델링 한 MATLAB 코드다.\n18 ~ 31 Line : 내 신호와, 남의 신호를 대역 신호로 만드는 과정이다. (대역 신호를 만드는 방법은 추후 포스팅)\n34 ~ 36 Line : 수신 신호 스펙트럼 모델링\n49 ~ 63 Line : Down-sampling 한 스펙트럼 모델링\n66 ~ 95 Line : Decimation (LPF + downsampling) 한 수신 신호 모델링\n4.4 신호처리 관점 결론 linkDecimation이란 Low-Pass-Filtering을 수행한 뒤 down-sampling을 하는 것을 의미한다.\n현업에서 설계를 할 때 모뎀 신호를 down-sampling을 한다고 표현하면 큰일난다. 내 신호가 간섭되어 엉망이 되어도 상관 없다는 말을 하는 것과 같기 때문이다.\n따라서 신호를 Decimation 한다는 표현을 꼭 사용하자. 아니면 Low Pass Filtering을 거친 후 down-sampling을 진행 한다고 말하는게 정확한 표현이다.\n5 구현 관점 link"
            }
        );
    index.add(
            {
                id:  5 ,
                href: "\/docs\/dsp\/fir_filter\/",
                title: "FIR Filter",
                description: " 1. 문서 설명 link신호처리 분야에서 매우 많이 쓰이는 Fir Filter를 신호처리 관점 및 RTL 구현 관점에서 기술한다.\n2. 정의 link FIR Filter : FIR은 Finite-Impulse-Response 의 약자이다. FIR 필터는 계수가 시간 축에서 유한한 필터이다. 3. 신호처리 관점 link3.1 Convolution의 시간 축 분석 linkFIR Filter를 이해하려면 먼저 Convolution 연산에 대해 이해해야 한다. 먼저 시간 축에서 Convolution 식에 대해 알아보자.\n",
                content: " 1. 문서 설명 link신호처리 분야에서 매우 많이 쓰이는 Fir Filter를 신호처리 관점 및 RTL 구현 관점에서 기술한다.\n2. 정의 link FIR Filter : FIR은 Finite-Impulse-Response 의 약자이다. FIR 필터는 계수가 시간 축에서 유한한 필터이다. 3. 신호처리 관점 link3.1 Convolution의 시간 축 분석 linkFIR Filter를 이해하려면 먼저 Convolution 연산에 대해 이해해야 한다. 먼저 시간 축에서 Convolution 식에 대해 알아보자.\n사실 Convolution 식이 곧 Filter의 식과 동일하다.\n$$\r\\begin{aligned}\ry[n] \u0026= (x * h)[n] = \\sum_{k=-\\infty}^{\\infty} x[n-k]\\, h[k] \\quad (단 \\:\\: k ≤ n)\\\\\r\\\\\rx \u0026= \\text{필터링의 대상이 되는 신호} \\\\\rh \u0026= \\text{필터의 계수}\r\\end{aligned}\r$$ FIR 필터는 정의는 필터의 계수가 유한한 필터라고 했다. 이 말은 $h$는 유한개의 유의미한 값이 있고, 나머지는 0이라는 소리다.\n이해를 위해 $h[0] = 1 , \\: h[1] = 2, \\: h[2] = 3, \\: h[3] = 4$ 이고 나머지 인덱스의 값은 모두 0이라고 가정하자.\n$h$가 0인 부분은 아무 의미가 없기 때문에 시그마의 범위를 아래 식과 같이 축소할 수 있다.\n$$\r\\begin{aligned}\ry[n] \u0026= (x * h)[n] = \\sum_{k=0}^{3} x[n-k]\\, h[k] \\quad (단 \\:\\: k ≤ n)\\\\\r\\\\\rx \u0026= \\text{필터링의 대상이 되는 신호} \\\\\rh \u0026= \\text{필터의 계수}\r\\end{aligned}\r$$ 이제 식을 전개해보자.\n$$\r\\begin{aligned}\ry[0] \u0026= x[0]h[0] \\\\\ry[1] \u0026= x[1]h[0] + x[0]h[1] \\\\\ry[2] \u0026= x[2]h[0] + x[1]h[1] + x[0]h[2] \\\\\ry[3] \u0026= x[3]h[0] + x[2]h[1] + x[1]h[2] + x[0]h[3]\r\\end{aligned}\r$$ 이게 Convolution의 연산을 하는 방법이다.\n3.2 Convolution의 시간 축, 주파수 축 관계 link이제 Convolution연산을 주파수 축에서 살펴보자.\n결론부터 말하면 시간 축에서 Convolution 연산은 주파수 축에서 곱셈과 동일하다. 증명은 생략한다.\n아래 그림을 살펴보자.\n위 1열의 그림은 주파수 축에서 신호를 나타냈고, 2열의 그림은 시간 축에서 신호를 나타냈다.\n주파수 축에서 -5MHz ~ 5MHz 신호만 선택하기 위해 사각 파형의 계수를 갖는 필터와 곱했다.\n주파수 축에서 곱하는 행위는 시간 축에서 Convolution과 동일하다.\n주파수 축에서 사각 파형은 시간 축에서 무한한 길이의 Sinc 함수와 대응되므로 필터 계수 $h$가 무한개의 유의미한 값이 존재한다.\n이럴 경우에는 이론상으로는 문제가 없지만, 구현상으로 아주 큰 문제가 발생한다. 왜냐하면 결과가 나오려면 무한대의 시간이 걸리기 때문이다.\n3.1장에서 시그마의 위 아래를 무한대에서 유한한 값으로 바꿨다. 이것이 가능했던 이유는 계수 $h$를 유한개의 의미있는 값으로 가정했기 때문이다.\n만약 계수 $h$가 무한개의 의미있는 값이라면 $y[0]$을 구하기 위해 무한대의 덧셈을 수행해야 하므로 결과를 얻으려면 무한대의 시간이 필요하다.\n3.3 Convolution과 Fir Filter의 관계 link3.2에서 우리는 무한한 길이의 Sinc함수가 구현상에서 큰 문제가 되었다. 엔지니어들은 이 문제를 단순하게 해결했다.\n그것은 바로 무한한 길이의 Sinc함수를 유한한(Finite) 길이의 Sinc함수로 바꾸는 것이다. 이제 FIR Filter가 뭔지 알 수 있다.\nFIR Filter란 이상적으로 무한개의 계수를 갖는 필터를 구현을 위해 유한개의 계수를 갖는 필터로 바꾼 것이다.\n그러나 무한개의 필터 계수를 유한개의 필터 계수로 바꾸면 분명 단점도 존재한다. 그것은 바로 필터링의 성능 저하다.\n무한 길이의 Sinc함수를 유한 길이의 Sinc함수로 바꾸려면 시간 축에서 단순히 Sinc함수의 양 옆을 잘라버리면 된다. 그러면 주파수 축에서 어떻게 될까?\n왼쪽은 Sinc함수, 오른쪽은 Sinc함수의 주파수 축 그림이다.\n무한한 길이의 Sinc 계수를 양 옆을 잘라 유한한 길이의 Sinc 계수로 만들었더니 주파수 축에서는 사각파형 모양이, 살짝 찌그러져 보인다.\n이 뜻은, 무한한 길이의 Sinc함수는 주파수 축에서 완벽한 사각 파형을 갖기 때문에 필터링을 거치면 주파수 축에서 내가 원하는 영역을 완벽하게 선택할 수 있다.\n반대로 유한한 길이의 Sinc함수는 찌그러진 사각 파형을 갖기 때문에 주파수 축에서 내가 원하는 영역을 완벽하게 선택할 수 없다.\n모든 것에는 대가가 따르는 법이다.\n4. 구현 관점 link이제 Fir Filter를 RTL로 구현해보자. 단순 RTL 구현이 아니라 FPGA에 최적화된 RTL 구조를 알아보자.\n4.1 SRL (Shift-Register-Lookup Table) linkXilinx FPGA는 SRL(Shift-Register-Lookup table)이 존재한다. SRL이 뭘까? 아래 그림을 살펴보자.\nSRL은 FPGA를 설계할 때 shift-register를 활용하여 지연 로직을 만들때 유용하다.\n일반적으로 shift-register는 플립플롭(F/F)을 활용하여 만드는데, SRL을 활용하면 LUT만으로 shift-register 구현이 가능하다.\n예를 들어 Xilix FPGA는 SRLC32E SRL로직이 있고, 이는 32clk의 딜레이를 갖는 Shift-Register다. 같은 기능을 구현하기 위해서 F/F 32개가 필요한데, F/F이 SRL 대비 로직면에서 크다. 따라서 SRL을 활용하면 면적 및 전력에서 이점을 갖는다.\nFir-Filter 구현을 위해서는 데이터의 지연 로직이 필수적인데, 이 지연 로직을 SRL을 활용해 구현하면 FPGA상에서 최적화할 수 있다.\n4.2 DSP linkXilinx FPGA에서는 MAC(Multiply-Accumulate) 연산에 최적화된 DSP 로직이 존재한다. 구조는 아래와 같다.\n먼저 Input하나를 지연 시킨뒤, 다음 데이터와 서로 덧셈 연산을 수행한다. 그 다음 덧셈 결과를 다른 데이터와 곱셈을 수행한다. 그 다음 곱셈결과를 누적하여 더한다.\n위 구조는 FPGA에서 DSP 1개의 로직을 사용하여 구현된다. 그리고 매우 빠른 덧셈, 곱셈 연산을 지원하기 때문에 Timing 관점에서 이득을 볼 수 있다.\n4.3 Even Symmetric Fir Filter linkEven-Symmetric Fir Filter는 필터의 계수가 짝수개이고, 계수가 좌우 대칭 형태를 이루는 Fir Filter다.\n예를 들어 필터 계수가 3,2,1,1,2,3 이라면 필터 계수가 6개고, 좌우 대칭형태를 띈다. 이러한 경우를 Even-Symmetric하다 라고 표현한다. 이제 RTL 블록 다이어그램을 살펴보자.\n아래 블록다이어그램은 필터의 계수의 길이가 4이고 Even-Symmetric한 Fir Filter의 블록 다이어그램 구조다.\n이해를 위해서 Clock 별로 데이터가 이동하는 것을 그려보자.\n"
            }
        );
    index.add(
            {
                id:  6 ,
                href: "\/docs\/fpga-demo\/i2c_interface_demo\/",
                title: "I2C Protocol Demo",
                description: " 1. 데모 설명 linkZybo Z7-10 FPGA 보드에서 I2C-Protocol을 활용해 외부 장치인 Display를 제어하는 방법을 기술한다.\nI2C 프로토콜의 동작원리를 파악하고 Verilog를 활용해 I2C-Protocol를 설계한다. 그 다음 SSD 1306 드라이버 기반으로 동작하는 디스플레이 주변장치를 FPGA와 연결하여 제어하는 DEMO를 기술한다.\n2. I2C 프로토콜 linkI2C 프로토콜이란 서로 다른 두 개의 칩 사이의 통신 프로토콜 중 하나이다.\nI2C 프로토콜은 한 개의 Master가 여러 개의 Slave를 제어할 때 사용할 수 있는 프로토콜이다. 또한 I2C 프로토콜은 Master와 Slave가 클럭에 동기화 되어 동작하는 프로토콜이다.\n",
                content: " 1. 데모 설명 linkZybo Z7-10 FPGA 보드에서 I2C-Protocol을 활용해 외부 장치인 Display를 제어하는 방법을 기술한다.\nI2C 프로토콜의 동작원리를 파악하고 Verilog를 활용해 I2C-Protocol를 설계한다. 그 다음 SSD 1306 드라이버 기반으로 동작하는 디스플레이 주변장치를 FPGA와 연결하여 제어하는 DEMO를 기술한다.\n2. I2C 프로토콜 linkI2C 프로토콜이란 서로 다른 두 개의 칩 사이의 통신 프로토콜 중 하나이다.\nI2C 프로토콜은 한 개의 Master가 여러 개의 Slave를 제어할 때 사용할 수 있는 프로토콜이다. 또한 I2C 프로토콜은 Master와 Slave가 클럭에 동기화 되어 동작하는 프로토콜이다.\n2.1 I2C-Protocol 동작 원리 link 위 그림에서 살펴볼 수 있듯이 1개의 Master가 여러개의 Slave와 데이터를 주고 받기 위해서 I2C 프로토콜을 활용한다. 이 때 Slave의 개수는 보통 127개에서 1024개까지 사용한다. Vs는 Slave가 동작하는데 필요한 입력 전압이다. 해당 Demo에서 사용할 SSD 1306 디스플레이 장치는 3.3V를 사용하여 동작한다.\nSCL은 Master와 Slave가 공유하는 데이터 클럭 라인이다. I2C는 그래서 동기식 프로토콜이다. SCL의 클럭 상태에 맞춰서 데이터가 전송된다.\nSDA는 Master와 Slave사이에서 데이터가 이동하는 라인이다. 즉 I2C 프로토콜은 SCL라인과 SDA라인 2개만 사용해서 데이터를 주고 받는 아주 간단한 프로토콜이다.\nI2C 프로토콜에서 사용되는 인터페이스를 모두 알았다. 다음은 SCL과 SDA의 동작 관계에 살펴보자.\nI2C 프로토콜이 동작하기 전, SDA와 SCL의 초기값은 항상 1상태를 유지해야한다. 왜냐면 Open Drain을 사용해야 하기 때문이다.\n초기값이 1일 때 하나의 선에 여러 Slave가 데이터를 공유할 수 있고, 신호 충돌을 방지할 수 있는 장점이 있다고 한다. (이해는 못했음..)\n이제 I2C 프로토콜의 동작 타이밍을 살펴보자.\nSDA가 1에서 0으로 떨어진다.\nSCL 클럭의 7클럭 동안 SDA를 통해 Slave의 Address 주소 데이터가 전달된다.\n– 7클럭 동안 Slave의 Address 주소 데이터를 전달하는 이유는 간단하다. I2C 프로토콜에서 Slave의 개수는 128개 까지 늘어날 수 있기 때문이다. (물론 1024개라면 10클럭동안 Address 주소 데이터를 전달해야 한다.)\n8번째 클럭에서 Master는 Read또는 Write 정보를 SDA를 통해 전달한다. 만약 8번째 클럭에 전달되는 데이터가 0이라면 Write 명령이다. 즉 Master는 앞선 7비트 주소를 갖는 Slave에 데이터를 쓰겠다는 의미다. 반대로 8번째 클럭에 전달되는 데이터가 1이라면 Read 명령이다. 즉 7비트 주소를 갖는 Slave로부터 데이터를 읽겠다는 의미다.\n8번째 클럭에서 Write 또는 Read 명령이 Slave에게 전달되면 9번째 클럭에서 Slave는 Ack 정보를 Master에게 전달한다. 만약 9번째 클럭에서 Master가 0을 받는다면 Slave로부터 ACK를 받은 것이다. 이 말은 8번째 클럭에서 Slave가 Write/Read 데이터를 제대로 받았다는 뜻이다. 반대로 9번째 클럭에서 Master가 1을 받는다면 Slave로부터 NACK를 받은 것이다. 즉 8번째 클럭에서 Slvae가 Write/Read 데이터를 제대로 받지 못했다는 뜻이다. 이 경우 1번 과정으로 돌아간다.\n만약 Master ACK를 받았다면 이제 데이터를 Write 또는 Read해야 한다. 8번째 클럭에서 Master가 Write 명령을 줬다면 Master가 Slave에 쓸 데이터를 이제 보내기 시작한다. Master가 8클럭에 걸쳐서 8개의 비트를 보내면 Slave는 8번째 비트를 받을 때마다, ACK를 보낸다.\n8번째 클럭에서 Master가 Read 명령을 줬다면 Slave가 Master에게 데이터를 보내기 시작한다. 이 때 Master가 8비트의 데이터를 받았다면 ACK를 Slave에게 보내야 한다.\n"
            }
        );
    index.add(
            {
                id:  7 ,
                href: "\/docs\/dsp\/interpolation_upsampling\/",
                title: "Interpolation vs Upsampling",
                description: " 1. 문서 설명 link신호처리를 할 때 Interpolation과 Up-sampling은 헷갈리는 개념이다.\nInterpolation을 정확히 이해하기 위해서 먼저 Interpolation과 Up-sampling의 의미에 대해 알아보고, 신호처리 관점 및 RTL구현 관점에서 해당 개념을 기술한다.\n2. 정의 link Interpolation : 디지털 신호를 먼저 샘플들 사이에 0을 집어넣어 up-sampling을 진행한다. 그 다음 Low-Pass-Filtering을 수행한다.\nUp-sampling : 디지털 신호를 샘플들 사이에 up-sampling factor 만큼 0을 넣어 up-sampling을 한다.\n",
                content: " 1. 문서 설명 link신호처리를 할 때 Interpolation과 Up-sampling은 헷갈리는 개념이다.\nInterpolation을 정확히 이해하기 위해서 먼저 Interpolation과 Up-sampling의 의미에 대해 알아보고, 신호처리 관점 및 RTL구현 관점에서 해당 개념을 기술한다.\n2. 정의 link Interpolation : 디지털 신호를 먼저 샘플들 사이에 0을 집어넣어 up-sampling을 진행한다. 그 다음 Low-Pass-Filtering을 수행한다.\nUp-sampling : 디지털 신호를 샘플들 사이에 up-sampling factor 만큼 0을 넣어 up-sampling을 한다.\nInterpolation과 Up-Sampling의 차이는 Low-Pass-Filtering을 수행하냐 안 하냐의 차이다.\n3. 상황 가정 및 문제 link두 개념의 차이를 설명하기 위해 아래와 같은 상황을 가정해보자.\n수신 신호 : 중심 주파수가 150Hz이고 대역폭이 143.75Hz인 대역 신호\n샘플링 클럭 : 1kHz\n수신 신호를 facotr = 2로 Interpolation 하는 상황\n모뎀 수신 동기화 알고리즘에서 Interpolation을 통해 심볼 타이밍을 복구하는 경우가 있다. 따라서 수신 신호를 Interpolation 하는 상황이 종종 있다.\n단순히 시간 축에서 0을 추가하여 샘플링 클럭 높히는 Up-sampling이면 충분할까? 답은 아니다.\n그 이유를 신호처리 관점에서 이해해보자.\n4. 신호처리 관점 link 4.1 스펙트럼 분석 link주파수 영역에서 신호를 분석하면 두 개념의 차이를 쉽게 이해할 수 있다. 아래 그림은 수신 신호의 스펙트럼이다.\n이제 시간 축에서 디지털 신호에 0을 추가해서 up-sampling을 전행하면 아래 스펙트럼과 같이 바뀐다.\nUp-Sampling 이후에 빨간색 Image 신호가 보이기 시작한다. 이러한 Image 신호는 신호 품질에 영향을 준다.\n4.2 LPF의 필요성 link따라서 위 Image 신호를 LPF를 통해 필터링 해줘야 한다.\n아래 그림은 이미지 신호를 LPF를 통해 필터링한 스펙트럼이다.\n이렇게 이미지 신호를 제거해줘야 비로소 Interpolation이 완성된다.\n4.3 시간 축에서 Upsampling과 Interpolation 비교 link시간 축에서 Interpolation과 Upsampling을 비교해보자.\n파란색 신호는 0을 추가해서 up-sampling을 한 신호다. 빨간색 신호는 Interpolation(up-sampling 후 LPF)을 한 신호다.\n신호를 보면 알 수 있듯이, 단순히 up-sampling만 한 신호 대비, LPF를 추가로 수행하여 Interpolation을 하면 신호가 부드럽게 채워짐을 알 수 있다.\n이 효과를 통해 샘플 사이의 값을 유추할 수 있는 효과가 나타난다. 그래서 모뎀의 수신 동기화 알고리즘에서 많이 사용한다.\n4.3 MATLAB 코드 link 1close all; 2clear all; 3%% Set Simulation Parameter 4fs = 500; % SampleRate 5sps = 8; % SampleperSym 6beta = 0.15; % RRC roll-off 7span = 10; % filter span (심볼 단위) 8NFFT = 2^15; % FFT Size 9t = 0:1/fs:10; % Continuous Time index 10f = linspace(-fs/2, fs/2, NFFT); % Discrete-Frequency axis (SampleRate) 11f_up = linspace(-fs, fs, NFFT); % Discrete-Frequency axis (Upsample) 12 13%% RRC pulse shaping 필터 생성 14rrc_filter = rcosdesign(beta, span, sps, 'normal'); % (RRC Filter coeffs) 15 16%% Create my Signal 17my_bits = 2*randi([0 1], 1, 500)-1; % BPSK Modulation 18my_upsampled = upsample(my_bits, sps); % upsampling 19my_shaped = conv(my_upsampled, rrc_filter, 'same'); % RRC Pulse shaping 20fc1 = 150; % My Signal Center Freq 21my_sig = my_shaped .* cos(2*pi*fc1*t(1:length(my_shaped))); % Upconversion 22 23%% rx_sig 24rx_sig = my_sig; 25 26%% rx_sig spectrum 27figure; 28fft_my = 20*log10(abs(fftshift(fft(my_sig,NFFT)))); 29fft_rx_sig = 20*log10(abs(fftshift(fft(rx_sig,NFFT)))); 30plot(f, fft_rx_sig); 31title('rx sig'); 32legend('수신 신호') 33%% Upsampling (Zero-Padding) 34up_rx_sig = upsample(rx_sig,2); % Zero-Padding을 수행하면 이미지 시그널이 생김 35fft_up_my = 20*log10(fftshift(abs(fft(up_rx_sig, NFFT)))); 36 37img_idx = abs(f_up) \u003e fs/2; 38origin_idx = abs(f_up) \u003c fs/2; 39 40figure; 41plot(f_up(img_idx), fft_up_my(img_idx),'r'); 42hold on; 43plot(f_up(origin_idx), fft_up_my(origin_idx),'b'); 44title('Upsampling Signal') 45legend('수신 신호','이미지 신호'); 46 47%% Interpolation 48interp_rx_sig = lowpass(up_rx_sig, 0.5); 49fft_interp_rx_sig = 20*log10(fftshift(abs(fft(interp_rx_sig,NFFT)))); 50figure; 51plot(f_up, fft_interp_rx_sig); 52title('Interpolation Signal'); 4.4 신호처리 관점 결론 linkInterpolation과 Upsampling의 차이는 LPF의 유무이다. Interpolation을 하기 위해서는 Up-sampling 이후에 LPF를 통해 Image 신호를 제거함을 기억하자.\n5. 구현관점 link신호처리 관점에서 Interpolation을 수행하는 과정을 살펴보았다. 과정을 요약해보면 Upsampling Factor만큼 0을 넣어서 Upsampling을 한다. 그 다음 LPF를 통과해 스펙트럼 상에서 Image 신호를 제거한다.\n위 그림을 살펴보면, 위 아래가 각각 주파수 축과 시간 축에서 대응되는 신호다.\n주파수 축에서 수신 신호를 2배 Upsampling한 신호에 대해 완벽한 LPF를 곱한다면 Image신호가 완벽하게 제거될 것이다.\n그러나 완벽한 LPF는 시간 축에서 무한한 길이의 Sinc 파형이다.\n주파수 축에서 곱은, 시간 축에서 Convolution이므로 이는 곧 무한한 계수를 갖는 Sinc 계수를 시간 축에서 Convolution을 해야 Image가 완벽히 제거된 Interpolation 신호를 얻을 수 있다는 것이다.\n따라서 완벽한 LPF를 곱하는 방식으로 Interpolation을 수행하는 것은 구현 관점에서 불가능하다. 이를 해결하기 위해 엔지니어들은 다양한 근사화를 시도했다.\n5.1 Fir Filter기반 Interpolation link근사화를 하는 가장 쉬운 방법은 덜 완벽한 LPF를 사용하는 것이다.\n"
            }
        );
    index.add(
            {
                id:  8 ,
                href: "\/docs\/rtl-ip\/lib_async_fifo\/",
                title: "lib_axis_fifo_async.v",
                description: " 모듈 설명 linkAsynchronous FIFO에 대한 개념을 설명하고 AXI4-Stream 인터페이스에 맞게 RTL로 구현하는 과정을 기술한다.\nSynchornous FIFO의 이해가 없다면 해당 게시물의 내용이 이해가 안 갈 것이므로, 왼쪽 링크에서 먼저 Sync FIFO의 개념을 이해하고 오자. (Synchornous FIFO 참고 링크)\n",
                content: " 모듈 설명 linkAsynchronous FIFO에 대한 개념을 설명하고 AXI4-Stream 인터페이스에 맞게 RTL로 구현하는 과정을 기술한다.\nSynchornous FIFO의 이해가 없다면 해당 게시물의 내용이 이해가 안 갈 것이므로, 왼쪽 링크에서 먼저 Sync FIFO의 개념을 이해하고 오자. (Synchornous FIFO 참고 링크)\nAsync FIFO 설명을 위해서는 먼저 CDC의 개념을 알아야 한다.\n1. CDC(Clock-Domaing-Crossing) 개념 link데이터를 처리하는 클럭의 속도가 달라질 때, CDC가 발생한다고 말한다.\nCDC가 생길 때 가장 큰 문제가 발생하는 부분은, Metastability가 발생한다는 점이다. 아래 그림을 통해 CDC의 개념을 알아보자.\nCLKA와 CLKB는 서로 다른 주파수의 클럭이다. DA데이터는 CLKA에 동기화 되어 있다. DA를 낮은 주파수의 CLKB로 처리하기 위해서 CDC가 발생하는 가정을 들어보자.\nDA는 CLKA의 1클럭동안 유효한 데이터이고 1클럭이 지나면 0으로 떨어진다. 이 때, DA가 0으로 값이 떨어지는 도중에 CLKB의 상승 엣지가 발생했다.\n이 때 CLKB 도메인으로 옮겨진 DA 데이터는 0일까? 1일까? 답은 애매하다. 이러한 상태를 Metastability(Meta)라고 표현한다.\nMeta를 해결하기 위해 다양한 CDC 기법이 존재한다.\n2. 2-FF Synchronizer link가장 대표적으로 데이터를 CDC할 수 있는 2-FF Synchronizer에 대해 알아보자.\nF/F은 데이터를 저장할 수 있는 하드웨어다. Old Clock domain에서 New Clock Domain으로 데이터를 CDC 처리할 때, 단순히 F/F을 2개 연달아서 배치하면 된다.\n이럴 경우 새로운 클럭으로 2clk이 delay된 신호를 최종 사용하기 때문에 Metastabilty 상태에서 벗어난 데이터를 안정적으로 사용할 수 있다.\n2-F/F Synchronizer를 활용해 Async FIFO를 설계할 수 있다.\n3. Gray Pointer vs Binary Pointer link여러 비트 폭의 데이터를 CDC 처리하기 위해서는 Asynchronous FIFO가 가장 많이 사용된다.\nAsynchronous FIFO와 Synchronous FIFO의 가장 큰 차이는 데이터를 쓰는 클럭과 읽는 클럭이 서로 다르다는 점이다.\nSynchronous FIFO에서는 포인터로 Binary Pointer를 사용한다. 말 그대로 포인터의 값을 이진수로 표현한 것이다.\n예를 들어 4비트 포인터 기준으로 보면, 0은 0000, 1은 0001, 2는 0010, 3은 0011 순서로 증가한다. 그런데 Binary Pointer를 사용할 경우, 1에서 2로 넘어갈 때 3번째와 4번째 비트가 동시에 바뀐다.\n즉, 포인터 값이 하나 증가해도 여러 비트가 동시에 변경될 수 있다는 뜻이다. 이렇게 여러 비트가 동시에 바뀌면 CDC 처리 중 오류가 발생할 확률이 높아진다.\n이 문제를 해결하기 위해 Async FIFO에서는 Gray Pointer를 사용한다. 아래 그림은 Gray Pointer의 예시를 보여준다.\nGray Pointer에서는 0이 0000, 1이 0001, 2가 0011, 3이 0010으로 바뀐다. Binary Pointer와 가장 큰 차이점은, 값이 하나 증가할 때마다 오직 하나의 비트만 변경된다는 점이다.\n이처럼 변화하는 비트 수를 최소화하면 CDC 처리에서의 위험을 줄일 수 있다.\n그렇다면 Binary Pointer를 Gray Pointer로 바꾸려면 어떻게 해야 할까?\n방법은 간단하다. Binary Pointer를 1비트 왼쪽으로 시프트한 값과 원래의 Binary Pointer 값을 XOR 연산하면 된다.\n예를 들어 Binary Pointer가 2인 경우를 살펴보자.\nBinary로 2는 0010이다. 이 값을 1비트 왼쪽으로 이동하면 0001이 되고, 이를 원래 값과 XOR 하면 0011이 된다.\n이와 같이 변환된 값이 Gray 코드이며, Async FIFO에서는 이 Gray Pointer를 사용해 포인터를 증가시키고 비교한다.\n4. Gray Pointer의 CDC 처리 linkBinary Pointer를 Gray Pointer로 바꾼 뒤 Metastabilty 상태를 없애기 위해서 2-ff Synchronizer를 사용한다.\nOld Clock(Write Clock) domain의 쓰기 Gray 포인터를 2-ff synchronizer를 거쳐 New Clock(Read Clock) Domain의 쓰기 Gray 포인터를 만들어 준다.\n반대로 New Clock(Read Clock) Domain의 읽기 Gray 포인터를 2-ff synchronizer를 거쳐 Old Clock(Write Clock) Domain으로 바꿔준다. 아래 그림을 참고하자.\n이제 Write Clock Domain과 Read Clock Domain에서 쓰기 포인터와 읽기 포인터의 값을 비교할 수 있다.\n이를 활용해서 Asnyc FIFO full과 empty상태를 판단할 수 있다.\n5. FULL 과 EMPTY 상태 판단 link먼저 FULL 상태부터 살펴보자.\nFULL은 FIFO에 데이터를 쓸 수 없는 상태이기 때문에, 쓰기 동작과 관련이 있다. 따라서 FULL 여부는 Write Clock Domain에서 판단해야 한다. 이를 위해 읽기 포인터를 Write Clock Domain으로 동기화(CDC)한 후, 쓰기 포인터(wr_ptr_wclk)와 읽기 포인터(rd_ptr_wclk)를 비교한다.\nAsync FIFO에서는 포인터가 Gray 코드 형태라서 Binary로 변환해서 비교할 수도 있지만, 하드웨어 구현 시 불필요한 로직이 추가되므로 보통은 Gray 코드 상태에서 직접 비교한다.\nSync FIFO의 경우, Binary 포인터 기준으로 MSB가 다르고 나머지 비트가 모두 같으면 FULL 상태이다. 예를 들어 Binary 포인터 기준으로 읽기 포인터가 0010이고 쓰기 포인터가 1010이면 FIFO는 FULL이다.\n이걸 Gray 코드로 바꾸면 0010은 0011이 되고, 1010은 1111이 된다. 두 값을 비교해보면 상위 2비트는 다르고 하위 2비트는 같다. 따라서 Gray 코드 기준으로도 상위 2비트가 다르고 나머지 비트가 같으면 FULL이라고 판단할 수 있다.\n다음으로 EMPTY 상태를 살펴보자.\nEMPTY는 FIFO에 읽을 데이터가 없을 때의 상태로, 읽기 동작과 관련이 있다. 따라서 EMPTY 여부는 Read Clock Domain에서 판단해야 한다. 쓰기 포인터를 Read Clock Domain으로 동기화한 후, 읽기 포인터와 비교한다.\nSync FIFO에서는 읽기 포인터와 쓰기 포인터가 완전히 같으면 EMPTY 상태이다. Async FIFO도 마찬가지로 Gray 포인터 형태의 읽기 포인터와 쓰기 포인터가 같으면 EMPTY 상태로 판단한다.\n핵심은 포인터 비교를 위해 포인터를 CDC 처리한 후, 동일한 클럭 도메인에서 진행해야 하며, 다른 도메인에서 온 포인터는 반드시 동기화 처리를 거쳐야 한다.\n6. RTL 설계 고려 사항 link위 내용을 정리하면 아래와 같다.\nFIFO의 Write 포인터와 Read 포인터를 Gray 포인터 형태로 바꾼다.\nFIFO의 FULL상태는 Write Clock Domain에서 비교해아한다. 이를 위해 Gray Pointer 형태의 Read Pointer를 2-ff Synchronizer를 통해 Write Clock Domain으로 바꾼다.\nGray Pointer 형태의 Write 포인터와 Read 포인터의 상위 2비트를 비교해 그 2비트가 서로 달라야하고, 나머지 비트는 서로 같을 때 FULL이다.\nFIFO의 EMPTY 상태는 Read Clock Domain에서 비교해야한다. 이를 위해 Gray Pointer 형태의 Write Pointer를 2-ff Synchronizer를 통해 Read Clock Domain으로 바꾼다.\nGray Pointer 형태의 Write 포인터와 Read 포인터가 서로 같을 때, EMPTY다.\n7. Verilog RTL 구현 link 1module lib_axis_fifo_async 2#( 3 parameter DW =8, 4 parameter FIFO_DEPTH = 8 5) 6( 7 // Master Interfaces 8 input s_axis_wclk, // Write CLK 9 input s_axis_resetn, 10 input s_axis_tvalid, 11 input signed [DW-1:0] s_axis_tdata, 12 output s_axis_tready, 13 14 // Slave Interfaces 15 input m_axis_rclk, // Read CLK 16 input m_axis_resetn, 17 output m_axis_tvalid, 18 output signed [DW-1:0] m_axis_tdata, 19 input m_axis_tready, 20 21 // Status 22 output o_empty, 23 output o_full, 24 output o_overflow 25); 26 27reg signed [DW-1:0] fifo [0:FIFO_DEPTH-1]; 28reg r_overflow; 29 30always @(posedge s_axis_wclk) begin 31 if(!s_axis_resetn) begin 32 r_overflow \u003c= 0; 33 end 34 else if(s_axis_tvalid \u0026\u0026 s_axis_tready \u0026\u0026 o_full) begin 35 r_overflow \u003c= 1; 36 end 37 else begin 38 r_overflow \u003c= 0; 39 end 40end 41 42// Write CLK Domain 43reg [$clog2(FIFO_DEPTH):0] wr_ptr_bin; 44wire [$clog2(FIFO_DEPTH):0] wr_ptr_gray; 45reg [$clog2(FIFO_DEPTH):0] rd_ptr_gray_meta; 46reg [$clog2(FIFO_DEPTH):0] rd_ptr_gray_wclk; 47 48always @(posedge s_axis_wclk) begin 49 if(!s_axis_resetn) begin 50 wr_ptr_bin \u003c= 0; 51 end 52 else if(s_axis_tvalid \u0026\u0026 !o_full \u0026\u0026 s_axis_tready) begin 53 wr_ptr_bin \u003c= wr_ptr_bin + 1; 54 end 55end 56 57assign wr_ptr_gray = bin2gray(wr_ptr_bin); 58 59// Read CLK Domain 60reg [$clog2(FIFO_DEPTH):0] rd_ptr_bin; 61wire [$clog2(FIFO_DEPTH):0] rd_ptr_gray; 62reg [$clog2(FIFO_DEPTH):0] wr_ptr_gray_meta; 63reg [$clog2(FIFO_DEPTH):0] wr_ptr_gray_rclk; 64 65// CDC - wr_ptr 66always @(posedge m_axis_rclk) begin 67 if(!m_axis_resetn) begin 68 wr_ptr_gray_meta \u003c= 0; 69 wr_ptr_gray_rclk \u003c= 0; 70 end 71 else begin 72 wr_ptr_gray_meta \u003c= wr_ptr_gray; 73 wr_ptr_gray_rclk \u003c= wr_ptr_gray_meta; 74 end 75end 76 77// Read Clock Domain 78always @(posedge m_axis_rclk) begin 79 if(!m_axis_resetn) begin 80 rd_ptr_bin \u003c= 0; 81 end 82 else if(m_axis_tready \u0026\u0026 !o_empty) begin 83 rd_ptr_bin \u003c= rd_ptr_bin + 1; 84 end 85end 86 87assign rd_ptr_gray = bin2gray(rd_ptr_bin); 88 89// CDC - rd_ptr 90always @(posedge s_axis_wclk) begin 91 if(!m_axis_resetn) begin 92 rd_ptr_gray_meta \u003c= 0; 93 rd_ptr_gray_wclk \u003c= 0; 94 end 95 else begin 96 rd_ptr_gray_meta \u003c= rd_ptr_gray; 97 rd_ptr_gray_wclk \u003c= rd_ptr_gray_meta; 98 end 99end 100 101// Write Clock Domain 102integer k; 103 104always @(posedge s_axis_wclk) begin 105 if(!s_axis_resetn) begin 106 for(k = 0; k \u003c FIFO_DEPTH; k = k+1) begin 107 fifo[k] \u003c= 0; 108 end 109 end 110 else if(s_axis_tvalid \u0026\u0026 s_axis_tready) begin 111 fifo[wr_ptr_bin[$clog2(FIFO_DEPTH)-1:0]] \u003c= s_axis_tdata; 112 end 113end 114 115// Read Clock Domain 116reg signed [DW-1:0] r_rdata; 117always @(posedge m_axis_rclk) begin 118 if(!m_axis_resetn) begin 119 r_rdata \u003c= 0; 120 end 121 else if(m_axis_tready) begin 122 r_rdata \u003c= fifo[rd_ptr_bin[$clog2(FIFO_DEPTH)-1:0]]; 123 end 124end 125 126reg m_axis_tready_1d; 127reg o_empty_1d; 128always @(posedge m_axis_rclk) begin 129 if(!m_axis_resetn) begin 130 m_axis_tready_1d \u003c= 0; 131 o_empty_1d \u003c= 0; 132 end 133 else begin 134 m_axis_tready_1d \u003c= m_axis_tready; 135 o_empty_1d \u003c= o_empty; 136 end 137end 138 139assign m_axis_tdata = r_rdata; 140assign m_axis_tvalid = m_axis_tready_1d \u0026\u0026 !o_empty_1d; 141assign o_empty = (rd_ptr_gray == wr_ptr_gray_rclk); 142assign o_full = (wr_ptr_gray[$clog2(FIFO_DEPTH)] != rd_ptr_gray_wclk[$clog2(FIFO_DEPTH)]) \u0026\u0026 143 (wr_ptr_gray[$clog2(FIFO_DEPTH)-1] != rd_ptr_gray_wclk[$clog2(FIFO_DEPTH)-1]) \u0026\u0026 144 (wr_ptr_gray[$clog2(FIFO_DEPTH)-2:0]) == rd_ptr_gray_wclk[$clog2(FIFO_DEPTH)-2:0]; 145assign s_axis_tready = !o_full; 146assign o_overflow = r_overflow; 147 148function [$clog2(FIFO_DEPTH):0] bin2gray; 149 input [$clog2(FIFO_DEPTH):0] bin; 150 begin 151 bin2gray = (bin\u003e\u003e1) ^ bin; 152 end 153 endfunction 154 155endmodule 8. Example Design linkaxis_fifo_async를 활용해서 Example Design을 설계해보자.\nDesign Example을 구성하는 모듈은 총 5개다.\n– fifo_data_gen.v : FIFO에게 쓸 데이터를 생성하는 MASTER 모듈이다.\n– lib_axis_fifo_async.v : Async FIFO가 구현된 모듈이다.\n– export_data.v : FIFO에서 데이터를 읽는 FIFO SLAVE 모듈이다.\n– tb.v : Testbench 파일이다.\n– lib_clk_rst_gen.v : Write CLK, Read CLK 및 초기 reset을 생성하는 모듈이다.\n위 5개의 모듈을 Vivado 프로젝트에 복사해서 Example Design을 만들 수 있다.\n8.1 tb.v link 1`timescale 1ns/1ps 2 3module tb_lib_sync_fifo; 4 5 wire clk_wr; 6 wire rst_wr; 7 reg i_wen; 8 reg i_ren; 9 reg signed [3:0] i_wdata; 10 reg i_valid; 11 wire signed [3:0] o_rdata; 12 wire w_valid; 13 wire w_empty; 14 wire w_full; 15 wire w_almost_full; 16 wire w_fifo_ready; 17 18 19 wire w_fifo_valid; 20 wire [4:0] w_fifo_data; 21 //Data Gen Module 22 fifo_data_gen u_fifo_data_gen 23 ( 24 .clk_wr(clk_wr), 25 .rst_wr(rst_wr), 26 .i_fifo_ready(w_fifo_ready), 27 .o_fifo_valid(w_fifo_valid), 28 .o_fifo_data(w_fifo_data) 29 ); 30 31 //FIFO 32 wire w_fifo_ren; 33 34 lib_axis_fifo_async 35 #(.DW(4), .FIFO_DEPTH(8), .MASTER_DELAY(1)) 36 u_fifo ( 37 .s_axis_wclk(clk_wr), 38 .s_axis_resetn(!rst_wr), 39 40 .s_axis_tvalid(w_fifo_valid), 41 .s_axis_tdata(w_fifo_data), 42 .s_axis_tready(w_fifo_ready), 43 44 .m_axis_rclk(clk_rd), 45 .m_axis_resetn(!rst_rd), 46 .m_axis_tvalid(w_valid), 47 .m_axis_tdata(o_rdata), 48 .m_axis_tready(w_fifo_ren), 49 50 .o_empty(w_empty), 51 .o_full(w_full), 52 .o_overflow() 53 ); 54 55 //Data Export Module 56 export_data u_export_data 57 ( 58 .clk_rd(clk_rd), 59 .rst_rd(rst_rd), 60 .i_valid(w_valid), 61 .i_data(o_rdata), 62 .i_fifo_empty(w_empty), 63 .o_fifo_ren(w_fifo_ren) 64 ); 65 66 // Clock 생성 67 lib_clk_rst_gen 68 #(.CLK_RATE(200), .RST_CYCLE(2.4)) 69 u_clk_wr_rst_gen 70 ( 71 .o_clk(clk_wr), 72 .o_rst(rst_wr) 73 ); 74 75 lib_clk_rst_gen 76 #(.CLK_RATE(140), .RST_CYCLE(2.4)) 77 u_clk_rd_rst_gen 78 ( 79 .o_clk(clk_rd), 80 .o_rst(rst_rd) 81 ); 82endmodule 8.2 lib_clk_rst_gen.v link 1module lib_clk_rst_gen 2#( 3 parameter real CLK_RATE = 200, //MHz 4 parameter real RST_CYCLE = 1 5) 6( 7 output o_clk, 8 output o_rst 9); 10 11reg r_clk = 1; 12reg r_rst = 1; 13 14localparam real CLK_PERIOD = 1000/CLK_RATE; 15 16always #(CLK_PERIOD/2) r_clk = ~r_clk; 17initial begin 18 repeat(RST_CYCLE) @(posedge o_clk); 19 r_rst = 0; 20end 21 22assign o_clk = r_clk; 23assign o_rst = r_rst; 24 25endmodule 8.3 fifo_data_gen.v link 1`timescale 1ns / 1ps 2////////////////////////////////////////////////////////////////////////////////// 3// Company: 4// Engineer: 5// 6// Create Date: 2025/04/27 15:08:47 7// Design Name: 8// Module Name: fifo_data_gen 9// Project Name: 10// Target Devices: 11// Tool Versions: 12// Description: 13// 14// Dependencies: 15// 16// Revision: 17// Revision 0.01 - File Created 18// Additional Comments: 19// 20////////////////////////////////////////////////////////////////////////////////// 21 22 23module fifo_data_gen( 24 input clk_wr, 25 input rst_wr, 26 input i_fifo_ready, 27 output reg o_fifo_valid, 28 output reg signed [4:0] o_fifo_data 29); 30 31reg [14:0] cnt; 32always @(posedge clk_wr) begin 33 if(rst_wr) begin 34 cnt \u003c= 0; 35 end 36 else begin 37 cnt \u003c= cnt + 1; 38 end 39end 40 41always @(posedge clk_wr) begin 42 if(rst_wr) begin 43 o_fifo_valid \u003c= 0; 44 end 45 else if(cnt \u003c 170) begin 46 o_fifo_valid \u003c= 1; 47 end 48 else begin 49 o_fifo_valid \u003c= 0; 50 end 51end 52 53always @(posedge clk_wr) begin 54 if(rst_wr) begin 55 o_fifo_data \u003c= 0; 56 end 57 else if(i_fifo_ready) begin 58 o_fifo_data \u003c= o_fifo_data + 1; 59 end 60 else begin 61 o_fifo_data \u003c= o_fifo_data; 62 end 63end 64 65endmodule 8.4 export_data.v link 1module export_data( 2 input clk_rd, 3 input rst_rd, 4 input i_valid, 5 input signed [3:0] i_data, 6 input i_fifo_empty, 7 output reg o_fifo_ren 8); 9 10reg [13:0] cnt = 0; 11always @(posedge clk_rd) begin 12 if(rst_rd) begin 13 cnt \u003c= 0; 14 end 15 else begin 16 cnt \u003c= cnt + 1; 17 end 18end 19 20always @(posedge clk_rd) begin 21 if(rst_rd) begin 22 o_fifo_ren \u003c= 0; 23 end 24 else if(cnt \u003c 60 \u0026\u0026 cnt[5] == 1) begin 25 o_fifo_ren \u003c= 1; 26 end 27 else if(cnt \u003c 80 \u0026\u0026 cnt[5] == 1) begin 28 o_fifo_ren \u003c= 1; 29 end 30 else if(cnt \u003c 160 \u0026\u0026 cnt[5] == 1) begin 31 o_fifo_ren \u003c= 1; 32 end 33 else begin 34 o_fifo_ren \u003c= 0; 35 end 36end 37 38reg signed [4:0] r_fifo_1d; 39always @(posedge clk_rd) begin 40 if(rst_rd) begin 41 r_fifo_1d \u003c= 0; 42 end 43 else if(i_valid) begin 44 r_fifo_1d \u003c= i_data; 45 end 46end 47 48endmodule 9. Vivado 합성 결과 Logic link "
            }
        );
    index.add(
            {
                id:  9 ,
                href: "\/docs\/rtl-ip\/lib_sync_fifo\/",
                title: "lib_axis_fifo_sync.v",
                description: " 모듈 설명 linkSynchronous FIFO에 대한 개념을 설명하고 AXI4-Stream 인터페이스에 맞게 RTL로 구현하는 과정을 기술한다.\n1. Synchronous FIFO 란? linkFIFO(First-In-First-Out)의 줄임말이다. 말 그대로 먼저 들어온 데이터가 먼저 나간다는 뜻이다.\nFIFO는 기본적으로 읽기 포인터와 쓰기 포인터로 동작한다. 아래 예제를 통해 FIFO의 동작원리를 알아보자.\n2. Synchronous FIFO 예제 linkDEPTH가 8인 FIFO를 예제로 설명을 진행한다. DEPTH란 FIFO에 저장될 수 있는 데이터 개수를 의미한다.\n",
                content: " 모듈 설명 linkSynchronous FIFO에 대한 개념을 설명하고 AXI4-Stream 인터페이스에 맞게 RTL로 구현하는 과정을 기술한다.\n1. Synchronous FIFO 란? linkFIFO(First-In-First-Out)의 줄임말이다. 말 그대로 먼저 들어온 데이터가 먼저 나간다는 뜻이다.\nFIFO는 기본적으로 읽기 포인터와 쓰기 포인터로 동작한다. 아래 예제를 통해 FIFO의 동작원리를 알아보자.\n2. Synchronous FIFO 예제 linkDEPTH가 8인 FIFO를 예제로 설명을 진행한다. DEPTH란 FIFO에 저장될 수 있는 데이터 개수를 의미한다.\nVerilog 특성상 FIFO는 데이터를 저장하는 F/F로 구현된다. F/F은 다음 클럭에서 값이 업데이트 된다는 것을 주목하면서 아래 예제를 따라가자.\n현재 wr_ptr의 index가 0이므로 FIFO의 0번 index에 x[0] 데이터가 저장되는 중이다.\nfifo index 0번에 데이터가 저장되고 있으므로 다음 클럭에 wr_ptr의 index를 1 증가 시켜 다음 데이터를 받을 준비를 한다.\nCLK1에서 CLK2가 되면서 FIFO index 0에 x[0] 데이터가 최종 저장된다.\nCLK1에서 CLK2가 되면서 wr_ptr이 0에서 1로 최종 증가되었다.\n동시에 현재 wr_ptr의 index가 1이므로 FIFO의 1번 index에 x[1] 데이터를 저장하는 중이다.\nFIFO index 1번에 데이터가 저장되고 있으므로 다음 클럭에 wr_ptr의 index를 1 증가시켜 다음 데이터를 받을 준비를 한다.\nCLK2에서 CLK3이 되면서 FIFO index 1에 x[1] 데이터가 최종 저장된다.\nCLK2에서 CLK3이 되면서 wr_ptr의 index가 1에서 2로 최종 증가되었다.\n동시에 현재 wr_ptr의 index가 2이므로 FIFO의 2번 index에 x[2] 데이터를 저장하는 중이다.\nFIFO index 2번에 데이터가 저장되고 있으므로 다음 클럭에 wr_ptr의 index를 1 증가시켜 다음 데이터를 받을 준비를 한다.\n데이터를 계속 저장하여 CLK6이 되었다. CLK5에서 CLK6이 되면서 FIFO의 6번 index에 x[6]이 FIFO에 최종 저장되었다.\n동시에 현재 wr_ptr의 index가 7이므로 FIFO의 7번 index에 x[7] 데이터를 저장하는 중이다.\nFIFO index 7번에 데이터가 저장되고 있으므로 다음 클럭에 wr_ptr의 index를 1 증가시켜 다음 데이터를 받을 준비를 한다.\nCLK6에서 CLK7이 되면서 FIFO index 7에 x[7] 데이터가 최종 저장된다.\nCLK6에서 CLK7이 되면서 wr_ptr이 최종 1 증가되었다.\n현재 wr_ptr의 index는 8이다. 그리고 rd_ptr의 index는 0이다. 8(1000)과 0(0000)은 MSB가 다르고 MSB를 제외한 나머지 하위 비트가 같다. 이러한 경우 FIFO가 Full 상태임을 확인할 수 있다.\nFIFO가 Full 상태이므로 더 이상 데이터를 받을 수 없다.\n이제 데이터를 읽어보자.\nrd_ptr의 index는 0이다. 따라서 FIFO index 0에서 데이터를 읽는 중이다.\nFIFO index 0에서 데이터를 읽고 있으므로 다음 클럭에 rd_ptr index를 1 증가 시켜 다음 데이터를 읽을 준비를 한다.\nCLK8에서 CLK9가 되면서 x[0] 데이터가 최종 read 되었다. 다만 FIFO에서 데이터를 읽는다고 해도 FIFO안에 저장된 데이터가 사라지지는 않는다. 그러나 x[0] 데이터가 덮어 써져도 문제 없는 상태다.\nCLK8에서 CLK9가 되면서 rd_ptr이 최종 1 증가한다. 현재 wr_ptr의 index는 8(1000)이고 rd_ptr의 index는 1(0001)이다. MSB는 다르지만, MSB를 제외한 나머지 비트가 모두 다르지 않기 때문에, 더 이상 full 상태가 아니다.\n다음 데이터를 읽기 위해 다음 클럭에 rd_ptr을 1 증가 시킨다.\nCLK9에서 CLK10이 되면서 x[1] 데이터가 최종 read 되었다.\nCLK9에서 CLK10이 되면서 rd_ptr이 최종 1 증가 되었다.\n현재 rd_ptr의 index는 2이므로 FIFO index 2번에서 데이터를 읽는 중이다.\n다음 클럭에 rd_ptr을 1 증가 시켜 다음 데이터를 읽을 준비를 한다.\nCLK14에서 CLK15가 되면서 x[6] 데이터가 최종 read 되었다.\nCLK14에서 CLK15가 되면서 rd_ptr이 최종 1 증가 되었다.\n현재 rd_ptr의 index는 7이므로 FIFO index 7번에서 데이터를 읽는 중이다.\nCLK15에서 CLK16이 되면서 x[7] 데이터가 최종 read 되었다.\nCLK15에서 CLK16이 되면서 rd_ptr이 최종 1 증가 되었다.\n현재 rd_ptr의 index는 8이다. 그리고 rd_ptr과 wr_ptr의 index가 서로 같다. 이 경우 FIFO는 empty 상태에 있다.\n다음 데이터를 쓰기 위해 다음 클럭에 wr_ptr의 데이터를 1 증가 시킨다.\nx[8] 데이터를 FIFO에 쓰는 중이다. 현재 wr_ptr의 index는 8(1000)인데 사실 wr_ptr의 하위 3비트를 보고 FIFO index를 결정한다. MSB 비트는 Full 상태를 판단하기 위한 추가 비트다. 따라서 FIFO index 0에 wr_ptr을 쓰는중이다.\nCLK16에서 CLK17이 되면서 x[8] 데이터가 최종 write 되었다.\nCLK16에서 CLK17이 되면서 wr_ptr이 최종 1 증가 되었다.\n동시에 현재 wr_ptr에 x[9] 데이터를 write하는 중이다.\n다음 데이터를 쓰기 위해 다음 클럭에 wr_ptr을 1 증가 시킨다.\n3. Verilog RTL 구현 link위 예제를 참고하여 RTL로 구현해보자.\n1module lib_axis_fifo_sync 2#( parameter DW = 8, 3 parameter FIFO_DEPTH = 8, // FIFO DEPTH must be power of 2 4 parameter MASTER_DELAY = 1 // Operating like skid buffer 5 // Master data transfer operate depends on s_axis_tready 6 // MASTER_DELAY is 1 7 // Master data transfer operate depends on s_axis_tready -1d 8 // MASTER_DELAY is 2 9) 10( 11 input s_axis_clk, 12 input s_axis_resetn, 13 14 // Master Interface 15 input s_axis_tvalid, 16 input signed [DW-1:0] s_axis_tdata, 17 output s_axis_tready, 18 19 // Slave Interface 20 output m_axis_tvalid, 21 output signed [DW-1:0] m_axis_tdata, 22 input m_axis_tready, 23 24 //Status 25 output o_empty, 26 output o_full, 27 output o_almost_full, // This Signal is asserted when FIFO becomes full before 1 clock 28 output o_overflow 29); 30 31reg [$clog2(FIFO_DEPTH):0] rd_ptr; 32reg [$clog2(FIFO_DEPTH):0] wr_ptr; 33 34reg signed [DW-1:0] fifo [0:FIFO_DEPTH-1]; 35reg r_overflow; 36 37 38integer j; 39 40always @(posedge s_axis_clk) begin 41 if(!s_axis_resetn) begin 42 rd_ptr \u003c= 0; 43 end 44 else if(m_axis_tready \u0026\u0026 !o_empty) begin 45 rd_ptr \u003c= rd_ptr + 1; 46 end 47end 48 49always @(posedge s_axis_clk) begin 50 if(!s_axis_resetn) begin 51 wr_ptr \u003c= 0; 52 end 53 else if(s_axis_tvalid \u0026\u0026 !o_full \u0026\u0026 s_axis_tready) begin 54 wr_ptr \u003c= wr_ptr + 1; 55 end 56end 57 58wire [$clog2(FIFO_DEPTH):0] wr_ptr_next = wr_ptr + $unsigned(MASTER_DELAY); 59 60always @(posedge s_axis_clk) begin 61 if(!s_axis_resetn) begin 62 r_overflow \u003c= 0; 63 end 64 else if(s_axis_tvalid \u0026\u0026 s_axis_tready \u0026\u0026 o_full) begin 65 r_overflow \u003c= 1; 66 end 67 else begin 68 r_overflow \u003c= 0; 69 end 70end 71always @(posedge s_axis_clk) begin 72 if(!s_axis_resetn) begin 73 for(j = 0; j \u003c FIFO_DEPTH; j = j+1) begin 74 fifo[j] \u003c= 0; 75 end 76 end 77 else if(s_axis_tvalid \u0026\u0026 s_axis_tready) begin 78 fifo[wr_ptr[$clog2(FIFO_DEPTH)-1:0]] \u003c= s_axis_tdata; 79 end 80end 81 82reg signed [DW-1:0] r_rdata; 83always @(posedge s_axis_clk) begin 84 if(!s_axis_resetn) begin 85 r_rdata \u003c= 0; 86 end 87 else if(m_axis_tready) begin 88 r_rdata \u003c= fifo[rd_ptr[$clog2(FIFO_DEPTH)-1:0]]; 89 end 90end 91 92reg m_axis_tready_1d; 93reg o_empty_1d; 94always @(posedge s_axis_clk) begin 95 if(!s_axis_resetn) begin 96 m_axis_tready_1d \u003c= 0; 97 o_empty_1d \u003c= 0; 98 end 99 else begin 100 m_axis_tready_1d \u003c= m_axis_tready; 101 o_empty_1d \u003c= o_empty; 102 end 103end 104 105assign m_axis_tdata = r_rdata; 106assign m_axis_tvalid = m_axis_tready_1d \u0026\u0026 !o_empty_1d; 107assign o_empty = (rd_ptr == wr_ptr); 108assign o_full = (rd_ptr[$clog2(FIFO_DEPTH)]!=wr_ptr[$clog2(FIFO_DEPTH)]) \u0026 (rd_ptr[$clog2(FIFO_DEPTH)-1:0] == wr_ptr[$clog2(FIFO_DEPTH)-1:0]); 109assign o_overflow = r_overflow; 110assign o_almost_full = (rd_ptr[$clog2(FIFO_DEPTH)]!=wr_ptr_next[$clog2(FIFO_DEPTH)]) \u0026 (rd_ptr[$clog2(FIFO_DEPTH)-1:0] == wr_ptr_next[$clog2(FIFO_DEPTH)-1:0]); 111assign s_axis_tready = !o_full; 112 113endmodule 5. Example Design linkaxis_fifo_sync를 활용하여 Example Design을 설계해보자.\nDesign Example을 구성하는 모듈은 총 5개이다.\nfifo_data_gen.v : FIFO에게 쓸 데이터를 생성하는 MASTER 모듈이다.\nlib_axis_fifo_sync.v : FIFO가 구현된 모듈이다.\nexport_data.v : FIFO에서 데이터를 읽는 FIFO의 SLAVE 모듈이다.\ntb.v : Testbench 파일이다.\nlib_clk_rst_gen.v : 클럭 및 초기 reset을 생성하는 모듈이다.\n위 5개의 모듈을 Vivado 프로젝트에 복사해서 Example Design을 만들 수 있다.\n5.1 tb.v link 1`timescale 1ns/1ps 2 3module tb_lib_sync_fifo; 4 5 wire clk; 6 wire rst; 7 reg i_wen; 8 reg i_ren; 9 reg signed [3:0] i_wdata; 10 reg i_valid; 11 wire signed [3:0] o_rdata; 12 wire w_valid; 13 wire w_empty; 14 wire w_full; 15 wire w_almost_full; 16 wire w_fifo_ready; 17 18 19 wire w_fifo_valid; 20 wire [4:0] w_fifo_data; 21 //Data Gen Module 22 fifo_data_gen u_fifo_data_gen 23 ( 24 .clk(clk), 25 .rst(rst), 26 .i_fifo_ready(w_fifo_ready), 27 .o_fifo_valid(w_fifo_valid), 28 .o_fifo_data(w_fifo_data) 29 ); 30 31 //FIFO 32 wire w_fifo_ren; 33 34 lib_axis_fifo_sync 35 #(.DW(4), .FIFO_DEPTH(8), .MASTER_DELAY(1)) 36 u_fifo ( 37 .s_axis_clk(clk), 38 .s_axis_resetn(!rst), 39 40 .s_axis_tvalid(w_fifo_valid), 41 .s_axis_tdata(w_fifo_data), 42 .s_axis_tready(w_fifo_ready), 43 44 .m_axis_tvalid(w_valid), 45 .m_axis_tdata(o_rdata), 46 .m_axis_tready(w_fifo_ren), 47 48 .o_empty(w_empty), 49 .o_full(w_full), 50 .o_almost_full(w_almost_full), 51 .o_overflow() 52 ); 53 54 //Data Export Module 55 export_data u_export_data 56 ( 57 .clk(clk), 58 .rst(rst), 59 .i_valid(w_valid), 60 .i_data(o_rdata), 61 .i_fifo_empty(w_empty), 62 .o_fifo_ren(w_fifo_ren) 63 ); 64 65 // Clock 생성 66 lib_clk_rst_gen 67 #(.CLK_RATE(200), .RST_CYCLE(2.4)) 68 u_clk_rst_gen 69 ( 70 .o_clk(clk), 71 .o_rst(rst) 72 ); 73endmodule 5.2 lib_clk_rst_gen.v link 1module lib_clk_rst_gen 2#( 3 parameter real CLK_RATE = 200, //MHz 4 parameter real RST_CYCLE = 1 5) 6( 7 output o_clk, 8 output o_rst 9); 10 11reg r_clk = 1; 12reg r_rst = 1; 13 14localparam real CLK_PERIOD = 1000/CLK_RATE; 15 16always #(CLK_PERIOD/2) r_clk = ~r_clk; 17initial begin 18 repeat(RST_CYCLE) @(posedge o_clk); 19 r_rst = 0; 20end 21 22assign o_clk = r_clk; 23assign o_rst = r_rst; 24 25endmodule 5.3 fifo_data_gen.v link 1module fifo_data_gen( 2 input clk, 3 input rst, 4 input i_fifo_ready, 5 output reg o_fifo_valid, 6 output reg signed [4:0] o_fifo_data 7); 8 9reg [14:0] cnt; 10always @(posedge clk) begin 11 if(rst) begin 12 cnt \u003c= 0; 13 end 14 else begin 15 cnt \u003c= cnt + 1; 16 end 17end 18 19always @(posedge clk) begin 20 if(rst) begin 21 o_fifo_valid \u003c= 0; 22 end 23 else if(cnt \u003c 70) begin 24 o_fifo_valid \u003c= 1; 25 end 26 else begin 27 o_fifo_valid \u003c= 0; 28 end 29end 30 31always @(posedge clk) begin 32 if(rst) begin 33 o_fifo_data \u003c= 0; 34 end 35 else if(i_fifo_ready) begin 36 o_fifo_data \u003c= o_fifo_data + 1; 37 end 38 else begin 39 o_fifo_data \u003c= o_fifo_data; 40 end 41end 5.4 export_data.v link 1module export_data( 2 input clk, 3 input rst, 4 input i_valid, 5 input signed [3:0] i_data, 6 input i_fifo_empty, 7 output reg o_fifo_ren 8); 9 10reg [13:0] cnt = 0; 11always @(posedge clk) begin 12 if(rst) begin 13 cnt \u003c= 0; 14 end 15 else begin 16 cnt \u003c= cnt + 1; 17 end 18end 19 20always @(posedge clk) begin 21 if(rst) begin 22 o_fifo_ren \u003c= 0; 23 end 24 else if(cnt \u003c 60 \u0026\u0026 cnt[5] == 1) begin 25 o_fifo_ren \u003c= 1; 26 end 27 else if(cnt \u003c 80 \u0026\u0026 cnt[5] == 1) begin 28 o_fifo_ren \u003c= 1; 29 end 30 else if(cnt \u003c 160 \u0026\u0026 cnt[5] == 1) begin 31 o_fifo_ren \u003c= 1; 32 end 33 else begin 34 o_fifo_ren \u003c= 0; 35 end 36end 37 38reg signed [4:0] r_fifo_1d; 39always @(posedge clk) begin 40 if(rst) begin 41 r_fifo_1d \u003c= 0; 42 end 43 else if(i_valid) begin 44 r_fifo_1d \u003c= i_data; 45 end 46end 6. AXI4-Stream Timing 분석 link o_fifo_valid는 MASTER 모듈에서 FIFO로 전달되는 데이터의 유효성을 나타낸다. MASTER의 valid신호는 SLAVE의 s_axis_tready와 무관하게 동작해야 한다. MASTER가 유효한 데이터를 만들면 그대로 valid신호를 만들어야 한다.\no_fifo_data는 s_axis_tready와 유관하게 동작해야 한다. s_axis_tready가 1이 되면 값을 증가시킨다. 그렇지 않으면 값을 변화시키지 않고 들고 있어야 한다.\nFIFO에 저장되는 데이터는 s_axis_tvalid와 s_axis_tready가 동시에 1일 때 Handshake가 발생하여 다음 클럭에 FIFO에 최종 저장된다. 데이터 9는 Handshake가 발생하지 않아, FIFO에 저장되지 않는다.\no_full = 1 일 때, FIFO는 full이다. 따라서 같은 타이밍에 s_axis_tready = 0이 된다. MASTER는 s_axis_tready를 보고 데이터를 증가시키는데, s_axis_tready가 0이므로 다음 클럭에 더 이상 데이터가 증가하지 않는다. 그리고 데이터 9를 계속 유지한다. 유지하는 데이터 역시 유효하므로 o_fifo_valid가 1로 유지된다.\nFIFO의 full이 풀린 순간, s_axis_tready는 동시에 1이 되어 data_gen에서 유지하고 있던 값 9를 다시 FIFO에 넣고, 다음 클럭에 데이터를 9에서 10으로 증가시킨다.\nm_axis_tready는 export_data가 데이터를 받을 준비가 되었다는 신호다. FIFO는 m_axis_tready를 보고 다음 클럭에 fifo에서 데이터를 빼 m_axis_tvalid를 1로 만든다. 7. Vivado 합성 결과 Logic link "
            }
        );
    index.add(
            {
                id:  10 ,
                href: "\/docs\/fpga-demo\/petalinux_build_demo\/",
                title: "Petalinux Build Demo (Zybo-z7-10)",
                description: " 1. 데모 설명 linkZybo Z7-10 FPGA 보드에서 Petalinux를 빌드하는 방법을 기술한다.\n본 문서는 Zybo z7-10 보드를 기준으로 설명된 문서지만, 다른 Xilinx FPGA 보드에도 적용 가능하다.\n2. What is Petalinux? linkPetalinux란 Vivado FPGA에 포팅 가능한 운영체제를 뜻한다. 운영체제 안에는 커널, 쉘, 네트워크 등등 다양한 디바이스 드라이버가 미리 구현되어 있기 때문에 개발 시간을 단축할 수 있다. 또한 운영체제가 자원을 효과적으로 관리 가능하다.\n",
                content: " 1. 데모 설명 linkZybo Z7-10 FPGA 보드에서 Petalinux를 빌드하는 방법을 기술한다.\n본 문서는 Zybo z7-10 보드를 기준으로 설명된 문서지만, 다른 Xilinx FPGA 보드에도 적용 가능하다.\n2. What is Petalinux? linkPetalinux란 Vivado FPGA에 포팅 가능한 운영체제를 뜻한다. 운영체제 안에는 커널, 쉘, 네트워크 등등 다양한 디바이스 드라이버가 미리 구현되어 있기 때문에 개발 시간을 단축할 수 있다. 또한 운영체제가 자원을 효과적으로 관리 가능하다.\n이와 반대로 Vivado에서 제공하는 Vitis 환경이 있는데 이는 운영체제가 없는 Baremetal 환경이다. Baremetal은 부팅 속도가 빠르고 단순하지만 주변 장치를 FPGA와 연동할 때에는 디바이스 드라이버를 따로 구현해야 하는 단점이 있다.\n만약 FPGA에 연결되는 주변 장치가 없다면 Baremetal 환경으로 검증하는 것도 좋은 방법이다. Petalinux를 FPGA에 Build한다는 뜻은 FPGA에 리눅스를 설치하는 것이다. 컴퓨터에 윈도우를 설치하는 것과 같다.\n3. Demo linkPetalinux를 Build하기 위한 Demo다. 3.1 항목 부터 차례대로 따라서 진행하면 된다. 이하 모든 과정은 "
            }
        );
    index.add(
            {
                id:  11 ,
                href: "\/docs\/rtl-ip\/mermaid\/",
                title: "Mermaid",
                description: "Example Mermaid diagrams",
                content: "Flowchart linkflowchart LR\rA[Hard] --\u003e|Text| B(Round)\rB --\u003e C{Decision}\rC --\u003e|One| D[Result 1]\rC --\u003e|Two| E[Result 2] Sequence diagram linksequenceDiagram\rAlice-\u003e\u003eJohn: Hello John, how are you?\rloop Healthcheck\rJohn-\u003e\u003eJohn: Fight against hypochondria\rend\rNote right of John: Rational thoughts!\rJohn--\u003e\u003eAlice: Great!\rJohn-\u003e\u003eBob: How about you?\rBob--\u003e\u003eJohn: Jolly good! Gantt Chart linkgantt\rsection Section\rCompleted :done, des1, 2014-01-06,2014-01-08\rActive :active, des2, 2014-01-07, 3d\rParallel 1 : des3, after des1, 1d\rParallel 2 : des4, after des1, 1d\rParallel 3 : des5, after des3, 1d\rParallel 4 : des6, after des4, 1d Class diagram linkclassDiagram\rClass01 \u003c|-- AveryLongClass : Cool\r\u003c\u003e Class01\rClass09 --\u003e C2 : Where am i?\rClass09 --* C3\rClass09 --|\u003e Class07\rClass07 : equals()\rClass07 : Object[] elementData\rClass01 : size()\rClass01 : int chimp\rClass01 : int gorilla\rclass Class10 {\r\u003e\u003eservice\u003e\u003e\rint id\rsize()\r} State diagram linkstateDiagram-v2\r[*] --\u003e Still\rStill --\u003e [*]\rStill --\u003e Moving\rMoving --\u003e Still\rMoving --\u003e Crash\rCrash --\u003e [*] Pie Chart linkpie\r\"Dogs\" : 386\r\"Cats\" : 85.9\r\"Rats\" : 15 Git Graph link gitGraph\rcommit\rcommit\rbranch develop\rcheckout develop\rcommit\rcommit\rcheckout main\rmerge develop\rcommit\rcommit Bar chart (using gantt chart) linkgantt\rtitle Git Issues - days since last update\rdateFormat X\raxisFormat %s\rsection Issue19062\r71 : 0, 71\rsection Issue19401\r36 : 0, 36\rsection Issue193\r34 : 0, 34\rsection Issue7441\r9 : 0, 9\rsection Issue1300\r5 : 0, 5 User Journey diagram link journey\rtitle My working day\rsection Go to work\rMake tea: 5: Me\rGo upstairs: 3: Me\rDo work: 1: Me, Cat\rsection Go home\rGo downstairs: 5: Me\rSit down: 3: Me C4 diagram linkC4Context\rtitle System Context diagram for Internet Banking System\rPerson(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\")\rPerson(customerB, \"Banking Customer B\")\rPerson_Ext(customerC, \"Banking Customer C\")\rSystem(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\")\rPerson(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\")\rEnterprise_Boundary(b1, \"BankBoundary\") {\rSystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\")\rSystem_Boundary(b2, \"BankBoundary2\") {\rSystem(SystemA, \"Banking System A\")\rSystem(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts.\")\r}\rSystem_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\")\rSystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\")\rBoundary(b3, \"BankBoundary3\", \"boundary\") {\rSystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank, with personal bank accounts.\")\rSystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\")\r}\r}\rBiRel(customerA, SystemAA, \"Uses\")\rBiRel(SystemAA, SystemE, \"Uses\")\rRel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\")\rRel(SystemC, customerA, \"Sends e-mails to\") "
            }
        );
    index.add(
            {
                id:  12 ,
                href: "\/docs\/section-folder\/",
                title: "Section Folder",
                description: "Example of a folder at the root of the content tree (under `/docs`)",
                content: ""
            }
        );
    index.add(
            {
                id:  13 ,
                href: "\/docs\/section-folder\/section-subfolder\/",
                title: "Section Subfolder",
                description: "Subfolder nested inside a root section folder",
                content: ""
            }
        );
    index.add(
            {
                id:  14 ,
                href: "\/docs\/section-folder\/section-subfolder\/second-section-subfolder\/third-section-subfolder\/",
                title: "Third Section Subfolder",
                description: "Subfolder nested inside a section subfolder",
                content: ""
            }
        );
    index.add(
            {
                id:  15 ,
                href: "\/docs\/section-folder\/section-subfolder\/second-section-subfolder\/",
                title: "Second Section Subfolder",
                description: "Subfolder nested inside a section subfolder",
                content: ""
            }
        );
    index.add(
            {
                id:  16 ,
                href: "\/docs\/section-folder\/section-subfolder\/second-section-subfolder\/third-section-subfolder\/example-doc\/",
                title: "Example Doc",
                description: "Example document nested inside multiple subfolders",
                content: ""
            }
        );
    index.add(
            {
                id:  17 ,
                href: "\/docs\/terms\/",
                title: "Terms",
                description: "Optional features in Lotus Docs.",
                content: ""
            }
        );
    index.add(
            {
                id:  18 ,
                href: "\/docs\/wireless_communication\/",
                title: "Wireless Communications",
                description: "Optional features in Lotus Docs.",
                content: ""
            }
        );
    index.add(
            {
                id:  19 ,
                href: "\/docs\/wireless_communication\/3_6_pulse_shaping_filter\/",
                title: "3.06 Pulse Shaping Filter",
                description: "How to configure Breadcrumb navigation for your Lotus Docs site.",
                content: "3.6 Pulse Shaping Filter link통신 모뎀 설계를 위해 필요한 펄스 정형 필터에 대해 기술한다.\n3.6.1 ISI(Inter-Symbol-Interference)란? link한국어로 직역하면 심볼 간 간섭이다. 명확한 이해를 위해 아래 그림을 살펴보자.\n빨간색 동그라미는 심볼이고 파란색 동그라미는 심볼을 4배 Upsampling한 샘플을 나타낸다. 위 심볼들은 시간 축에서 직사각형 형태를 띈다. 이렇게 직사각형 형태로 신호를 만들면 서로 다른 심볼은 다른 심볼 구간을 침범하지 않고 분리되어 있다. 이런 경우 심볼 간 간섭(ISI)가 없다고 말한다.\n그러나 이러한 직사각형 펄스 형태의 신호는 많은 문제가 있다. 이를 이해하기 위해 먼저 직사각형 펄스 형태의 신호를 알아보자.\n3.6.2 Spectrum of Rectangular Pulse link3.6.1 그림에서 심볼 1개에 대한 신호만 보면 직사각형 펄스 형태의 신호를 보인다. 시간 축에서 직사각형 펄스는 주파수 축에서 Sinc 형태를 보인다.\n심볼 당 샘플 수가 $L$인 직사각형 펄스 신호의 주파수 스펙트럼 식은 아래와 같이 쓸 수 있다.\n$$ \\left|P_{\\text{rect}}[k]\\right| = \\frac{\\sin\\left(\\pi L k / N\\right)}{\\sin\\left(\\pi k / N\\right)} $$\n위 식에서 주파수 성분의 크기가 0이 되는 순간은 분자가 0일 때다. 따라서 $ \\pi L (k / N) $ 이 $ \\pi $의 배수일 때 분모가 0이 된다. 따라서 $ k / N = \\pm 1 / L, \\pm 2 / L … $ 일 때 분자는 0이된다.\n이산 주파수 성질을 활용해 $F_{null} = F_S\\frac{k}{N} = F_S\\frac{m}{L}=\\frac{m}{T_M}$로 다시 쓸 수 있다. 여기서 $m$은 정수다.\n정리하면 시간 축에서 심볼 당 샘플이 $L$개인 직사각형 펄스의 주파수 스펙트럼은 이산 주파수 $ \\pm 1 / T_M, \\pm 2 / T_M, \\pm 3 / T_M … $ 일 때 크기가 0이다.\n나이퀴스트 정리에 의해 유효한 주파수 범위는 $-0.5F_s \\leq F \\leq 0.5F_S $ 인데 심볼 당 샘플 수가 $L$이고 심볼 레이트 $T_M$이면 $F_S = L/T_M$이 성립한다.\n따라서 유효 주파수 범위를 $-0.5 \\frac{L}{T_M} \\leq F \\leq 0.5\\frac{L}{T_M}$로 다시 쓸 수 있다.\n만약 심볼 당 샘플 $L$이 8이면, 유효 주파수 범위는 $ -\\frac{4}{T_M} \\leq F \\leq \\frac{4}{T_M} $이다. 심볼 당 샘플이 8인 직사각형 펄스 형태의 시간 축 신호를 주파수 축 스펙트럼으로 나타내면 아래 그림과 같다.\n스펙트럼에서 보면 알 수 있겠지만 직사각형 펄스 형태의 시간 축 신호는 아주 큰 문제가 있다. 피크 대비 사이드 로브의 크기 차이가 13dB밖에 차이가 나지 않는다는 점이다.\n이러한 경우, 인접한 스펙트럼이 다른 사용자에게 할당되었을 경우 사이드로브의 큰 에너지 때문에 심한 간섭이 발생할 수 있다. 이러한 경우를 채널 간 간섭이라고 부른다.\n직사각형 펄스 신호는 심볼 간 간섭은 없지만, 주파수 측 측면에서 채널 간 간섭을 유발할 수 있다는 문제가 있다.\n두 번째 문제는 점유하고 있는 대역폭이 너무 넓다는 점이다. 주파수 역시 한정된 자원이기 때문에 내가 사용하는 신호의 주파수 대역폭이 좁을 수록 유리하다.\n위에 열거된 문제를 해결하기 위해 엔지니어들은 다양한 관점에서 개선을 시도했다.\n3.6.2 Nyquist No-ISI 조건 (시간 축에서) link직사각형 펄스 형태의 단점을 안 이상, 채널 간 간섭을 줄이면서 대역폭을 줄일 수 있는 방법을 찾아야 한다. 먼저 대역폭을 줄이는 방식을 살펴보자.\n그러나 가장 중요한 것은, 대역폭과 사이드 로브의 크기는 줄이지만, 심볼 간 간섭이 0인 조건은 유지해야한다. 그러기 위해 먼저 시간 축에서 심볼 간 간섭이 없는 조건을 알아야 한다.\n이를 위해 시간 축에서 직사각형 펄스의 auto-correlation 신호를 살펴보자.\n빨간색 곡선은 직사각형 펄스의 자기상관 결과이고, 파란색 점선은 어떤 특정 신호의 자기상관 결과다.\n두 신호 모두 심볼 간격 $T_M$​에서 0의 값을 가지므로, 둘 다 ISI는 발생하지 않는다.\n차이점은 빨간색 신호는 $-T_M \\leq t \\leq T_M$ 구간만 0이 아니고 다른 시간에서는 전부 0이다. 반면 파란색 신호는 심볼 간격 $T_M$에서만 0이고 나머지에서 0이 아니다.\n이때 중요한 점은, 빨간색 곡선처럼 모든 구간이 0이어야만 ISI가 없는 것이 아니라, 심볼 간격에서만 0이 되면 ISI는 발생하지 않는다는 사실이다.\n즉, 샘플링 시점인 심볼 간격에서만 ISI가 없으면, 나머지 시점에서는 값이 0이 아니어도 상관없다.\n일반적으로 시간 축에서 좁은 신호(예: 직사각형 펄스)는 주파수 대역에서는 넓은 대역폭을 차지한다. 반대로 시간 축에서 길게 퍼진 신호는 주파수 영역에서는 좁은 대역폭을 가진다.\n따라서, 시간 축에서 길게 퍼져 있지만 심볼 간격에서는 0을 유지하는 파란색 곡선처럼 신호를 설계하면 ISI 없이도 대역폭을 줄일 수 있다.\n정리하면, 어떤 신호의 auto-correlation 결과가 심볼 간격 $T_M$ 에서, 해당 심볼을 제외한 나머지에서 모두 0이면, ISI가 발생하지 않는다.\n여기서 한 가지 의문이 생긴다. 왜 auto-correlation 결과로 ISI 여부를 판단하는가?\n그 이유는 수신기가 송신된 신호를 검출할 때 auto-correlation을 이용하기 때문이다. 특히 무선 통신에서는 송신 시점이 불확실하므로, 송신기는 앞부분에 알려진 심볼 시퀀스를 삽입하고, 수신기는 수신된 신호 전체에 대해 correlation을 수행한다.\n이때, auto-correlation 결과가 최대가 되는 시점을 기준으로 송신 신호가 도착했다고 판단한다. 따라서 수신기를 설계할 때 auto-correlation은 필수적인 과정이다.\n만약 auto-correlation 수행 중 ISI가 발생한다면, 심볼 간격 시점의 값이 망가져 정확한 심볼 추정이 불가능하다. 반대로 ISI가 없다면 수신기는 올바른 정보를 얻을 수 있다.\n결론적으로, auto-correlation 결과가 심볼 간격에서 0이 되도록 설계하면 시간 영역에서 ISI 없는 신호를 만들 수 있다. 이것이 Nyquist No-ISI 조건의 핵심이다.\n3.6.2 Nyquist No-ISI 조건 (주파수 축에서) link 위 그림에서 (a)는 시간 축에서 ISI가 없는 조건을 만족하는 첫 번째 심볼의 시간 축 파형이다. 빨간색 신호는 심볼 당 샘플이 $L$인 신호고 파란색 신호는 Down-Sampling을해 심볼 만 나타낸 신호다.\n실제 우리가 송신하는 신호는 여러개의 심볼이 존재한다. 예를 들어 두 번째 심볼의 시간 축 파형은 $T_M$일 때 1, 나머지 심볼 간격에서는 0인 신호가 있을 것이다.\n그리고 (a)에서의 신호와 합쳐져서 전송될 것이다.\n이렇게 만들어진 송신 신호를 주파수 스펙트럼에서 보면 심볼 간격 $\\frac{1}{T_M}$ 마다 반복되어 나타나게 된다.\n이유를 간단히 살펴보면 원래 샘플레이트 $F_S$로 송신된 신호는 $F_S$간격으로 주파수 레플리카가 반복된다. 이 신호를 심볼 당 샘플 $L$로 down-sampling을 하면 샘플레이트 역시 $\\frac{F_S}{L} = \\frac{1}{T_M}$으로 줄어들게 된다. 따라서 down-sampling된 신호는 주파수 레플리카가 $\\frac{1}{T_M}$마다 반복되게 된다.\n위 그림의 왼쪽 스펙트럼은 $\\frac{1}{T_M}$간격마다 스펙트럼이 반복되고 스펙트럼의 합이 평탄하게 이루어져 있다. 이럴 경우 No-ISI 조건을 만족한다.\n반면 오른쪽 스펙트럼은 $\\frac{1}{T_M}$마다 스펙트럼이 반복되지만 그 합이 평탄하지 못하고 Hole이 존재한다. 이럴 경우 No-ISI 조건을 만족하지 못한다.\n3.6.3 Coefficients of an Ideal Pulse Auto-correlation link심볼 간 간섭이 없는 이상적인 송신 신호를 만들기 위해서 주파수 축에서 $-\\frac{1}{2T_M} \\leq F \\leq \\frac{1}{2T_M}$에서 평탄한 직사각형 형태를 가져야 함을 알았다.\n주파수 축에서 직사각형 펄스는 시간 축에서 Sinc함수의 형태를 띈다. 즉 시간 축 신호에서 심볼을 Sinc함수 형태로 만든다면 ISI가 없는 이상적인 신호를 만들 수 있다.\n아래 그램은 ISI가 없는 이상적인 송신 신호를 시간 축에서 나타냈다. 심볼 당 샘플은 4일 때를 가정한다.\n심볼 간격 $T_M$에서 0이고 Sinc함수의 형태를 갖는다. 그러나 이 신호는 실제로 구현될 수 없다. Sinc함수는 시간 축에서 무한한 길이를 갖기 때문이다.\n실제 구현을 위해서는 Sinc 신호의 양 옆을 일정부분 잘라야 한다. 양 옆을 자르면 주파수 영역에서 완벽한 직사각형 형태를 띄지 못하고, 주파수 레플리카가 서로 겹치게 되는 문제가 발생한다.\n또한 실제 시스템에서 송신기와 수신기는 독립적인 클럭을 바탕으로 동작하기 때문에 타이밍 오류가 발생하여 정확한 심볼 간격에서 값을 수신하지 못할 수 있다. 이럴 경우 ISI가 발생한다.\n이러한 현실적인 문제를 해결하기 위해서 Raised Cosine 필터가 등장한다.\n3.6.4 Raised Cosine Filter link3.6.2에서 주파수축에서 ISI가 없는 조건은 $-\\frac{1}{2T_M} \\leq F \\leq \\frac{1}{2T_M}$에서 평탄한 스펙트럼을 가져야 하는 것이다.\n그러나 시간 축에서 무한히 긴 Sinc함수를 송신 신호로 사용할 수 없기 때문에, 양 옆을 잘라야하고 결국 주파수 스펙트럼상에서 완벽한 직사각형 모양은 약간 찌그러지게 된다.\n그러나 모양이 찌그러지더라도, 이를 잘 활용해 주파수 스펙트럼을 평탄하게 만들 수 있다. 아래 그림을 살펴보자.\n파란색 스펙트럼은 약간 찌그러진 사각 스펙트럼이고, 점선 스펙트럼은 주파수 레플리카다. 이 때 인접한 레플리카가 넘어온 영역이 $\\frac{1}{2T_M}$에 대해 홀수 대칭을 띈다면 그 합은 여전히 평탄할 것이다.\n즉 레플리카가 신호 영역을 침범해도, 결과적으로 주파수 스펙트럼은 평탄한 모양을 띌 수 있게 된다.\n여기서 핵심은 스펙트럼 영역에서 직사각형 형태의 펄스 정형 필터를 어떻게 잘 찌그러트려서 $\\frac{1}{2T_M}$에 대해 홀수 대칭을 유지하면서, 시간 축에서 최대한 짧은 꼬리를 가질 수 있게 만들지 생각해봐야 한다.\n방법은 생각보다 간단하다.시간 영역에서 Sinc 신호의 긴 꼬리는 주파수 영역에서 직사각형 펄스의 갑작스러운 변화 때문이므로, 주파수 영역에서 직사각형 펄스를 최대한 부드럽게 만들어 주면 된다.\n우리가 가장 쉽게 생각할 수 있는 부드러운 신호는 사인파다. 그래서 주파수 영역의 직사각형 펄스에 주파수 영역의 사인파를 컨볼루션해준다면, 시간 축 영역에서 짧아진 꼬리를 갖는 Sinc 신호가 만들어지게 될 것이다. 그 과정은 아래에 나타낸다.\n위 그림에서 주파수 영역의 직사각형 펄스에 주파수 영역의 사인파를 컨볼루션하면 $\\frac{1}{2T_M}$에 대해 홀수 대칭을 유지하면서 부드러워진다.\n주파수 영역에서 이러한 형태의 스펙트럼을 갖는 펄스 정형 필터를 Raised Cosine 필터라고 말한다.\n이 때 $\\alpha$를 roll-off 인자라고 말한다. $\\alpha = 0.25$면 최소 대역폭 대비 25%가 넓어졌다는 의미이다.\n이 roll-off 인자는 대역폭과, 시간 축에서 신호의 감쇄정도에 영향을 준다. 먼저 대역폭에 대해 살펴보자.\nroll-off가 클수록 대역폭은 넓어지게 된다.\n다음으로 시간 축 감쇄에 대해 살펴보자.\nroll-off가 클수록 감쇄가 빨라지게 된다.\n결과적으로 roll-off가 클수록 대역폭은 커지지만 시간 축에서 감쇄는 빠르게 일어난다. 감쇄가 빠르면 송/수신기의 타이밍 클럭 오차에서 발생하는 심볼 간 간섭을 줄여 타이밍 오차에 강인하게 만들 수 있다.\n반대로 roll-off가 작다면 대역폭은 작아지지만 시간 축에서 감쇄는 느리게 일어난다. 따라서 송/수신기의 타이밍 클럭 오차에서 발생하는 심볼 간 간섭이 커져 타이밍 오류에 민감하게 된다.\n3.6.5 Squared Root Raised Cosine Filter link그럼 모뎀을 설계할 때 Rasied Cosine Pulse Shaping Filter는 어디에 배치해야 할 까? 송신기와 수신기 관점에서 생각해보자.\n만약 수신기에 Pulse Shaping 필터를 배치한다면, 송신기에서 신호를 만들 때 사이드로브를 제어할 수 없다. 따라서 인접 채널에 영향을 주게 된다.\n반대로 송신기에 배치하면 어떨까? 이럴 경우 수신기에서는 무선 환경에서 추가된 잡음이 신호와 함께 들어오게 되고, SNR이 나빠지는 경우에 대해 대처할 수 없게 된다.\n따라서 이 필터를 송신기와 수신기에 나눠서 배치하게 된다. 이를 위해 Raised Cosine 필터의 계수를 Squared root해 송신기와 수신기에 각각 나눠 구현하게 된다.\n송신기에 있는 필터를 SRRC Pulse Shaping Filter, 수신기에 있는 필터를 Matched Filter로 표현하기도 한다.\nSRRC를 거쳐 나온 시간 축 송신 신호 파형은 아래와 같다.\n더 이상 심볼 간격 $T_M$에서 0이 아니다. 즉 ISI가 발생한다. 하지만 이는 당연하다. 수신기의 Matched Filter까지 거쳐야 심볼 간 간섭이 완벽히 제거되는 것이다.\n3.6.6 SRRC 필터의 단점 link송신기와 수신기에 Raised Cosine 필터를 나누어서 구현하면 많은 장점이 존재한다. 송신기에서 대역폭 컨트롤이 가능하고 수신기에서 효과적으로 잡음 제거가 가능하다.\n그러나 분명히 단점도 존재한다. 사실 SRRC 필터는 이론상으로는 No-ISI 조건을 만족하는 필터지만, 실제 구현상으로는 그러지 않는다.\n유한한 길이의 필터를 사용해야하기 때문에, SRRC 필터의 탭 계수 역시 유한개로 잘리게 된다. 그럴 경우 스펙트럼 상에서 더 이상 $\\frac{1}{2T_M}$에 대해 홀수 대칭을 띄지 않게 된다.\n아래 그림을 살펴보자.\n$\\frac{1}{2T_M}$을 기준으로 약 3dB 위쪽으로 스펙트럼이 지나가게 된다. 이럴 경우 스펙트럼 레플리카가 더해지면 더 이상 평탄하지 않게 된다.\n따라서 주파수 영역에서 No-ISI 조건을 만족할 수 없게 되어 약간의 심볼 간 간섭이 발생하게 된다.\n3.6.6 Upgrade SRRC Filter link우리는 Pulse Shaping Filter의 스펙트럼이 직사각형 일 때 발생하는 문제를 해결하기 위해 부드러운 사인파를 주파수 영역에서 컨볼루션했다.\n그 결과 시간 축에서 무한한 길이를 유한하게 바꿀 수 있었고, 동시에 심볼 간 간섭을 0으로 만드는 Pulse Shaping Filter를 만들 수 있었다.\n위 그림에서 알 수 있듯이, 시간 축에서 직사각형 Pulse Shaping 필터를 사용하는 것 대비, SRRC 필터를 사용하면 대역폭 및 사이드로브의 크기를 획기적으로 줄일 수 있다.\n그러나 아직 사이드로브의 크기가 충분히 감쇄된건 아니다. 우리는 감쇄를 충분히 더 주기 위해 직사각형 스펙트럼에 사인파를 컨볼루션 하는데신 카이저 파형을 컨볼루션 할 수 있다.\n위 그림을 통해 RRC Pulse Shaping Filter 대비 더 많은 감쇄를 줄 수 있다. 그러나 주파수의 평탄한 영역이 줄어드므로 이에 따른 trade-off를 잘 고려해야 한다.\n"
            }
        );
    index.add(
            {
                id:  20 ,
                href: "\/docs\/wireless_communication\/3_7_quadrature-amplitude-modulation---%EB%B3%B5%EC%82%AC%EB%B3%B8\/",
                title: "3.07 Quadrature Amplitude Modulation (QAM)",
                description: "How to configure Breadcrumb navigation for your Lotus Docs site.",
                content: "3.7.1 QAM 송신기 구조 link 위 그림은 QAM Modulator의 구조다. 위 구조를 바탕으로 단계를 따라가면 QAM Waveform이 생성되는 과정을 살펴본다.\n3.7.1.1 Bits to Symbol linkQAM 웨이브폼을 만들기 위한 순서에 대해 알아보자. 설명을 쉽게 하기 위해 2-QAM을 가정한다.\n2-QAM은 비트 1개가 심볼 1개에 매핑되는 QAM 변조 방식이다. 만약 4-QAM이라면 비트 2개가 심볼 1개에 매핑된다.\n먼저 비트레이트 $R_b$에 해당하는 속도로 비트가 생성된다. 2-QAM 기준으로 비트 1개가 심볼 1개를 구성하므로 심볼레이트 $T_M = R_b$가 성립한다.\n들어온 비트는 미리 정의된 LUT의 주소로 사용되어 심볼과 매핑된다.\n위 그림을 참고해보면 쉽게 이해할 수 있다. 예를 들어 비트 00이 들어오면 I-Waveform에 해당하는 심볼은 $+A$가 되고 Q-Waveform에 해당하는 심볼은 $-A$가 된다.\n그래서 성상도에서 제 4사분면에 위치하는 심볼로 결정된다.\n만약 비트 01이 들어오면 주소는 1이다. 즉 I-Waveform에 해당하는 심볼은 $-A$가 되고 Q-Waveform에 해당하는 심볼은 $-A$가 된다. 그리고 성상도에서 제 3사분면에 위치하는 심볼로 결정된다.\n이러한 방식으로 연속으로 들어온 2개의 비트를 각각 I와 Q 심볼에 매핑해 같은 시간에 심볼을 병렬적으로 보낼 수 있다.\n3.7.1.2 Up-Sampling link다음은 Up-Sampling 차례다. 디지털 신호를 처리하기 위해서 고속의 샘플레이트를 갖는 FPGA를 사용하는데, 이때 사용되는 클럭이 SampleRate를 결정한다.\n만약 SymbolRate가 100Mbps고 SampleRate가 200MHz라면 SymbolRate를 SampleRate에 맞추기 위해 2배 Up-Sampling을 수행하게 된다.\n이 때 기호로 $L$로 표현하고 $L=2$는 심볼 당 샘플 수라고 정의한다. 심볼레이트와 샘플레이트의 관계는 $T_S = LT_M$를 만족한다.\nI-Waveform과 Q-Waveform에 각각 Upsampling을 수행하면 $\\tilde{a_I}(nT_S)$와 $\\tilde{a_Q}(nT_S)$와가 만들어지게 된다.\n3.7.1.3 Pulse Shaping link다음은 Pulse Shaping차례다. 3.6절에서는 최적의 Pulse-Shaping Filter로 SRRC(Squared-Root-Raised-Cosing Filter)를 발견했다.\n$\\tilde{a_I}(nT_S)$와 $\\tilde{a_Q}(nT_S)$과 SRRC 필터의 계수를 시간 축에서 Convolution을 수행해 Pulse Shaping 과정을 수행한다.\n식으로 표현하면 아래와 같다.\n$$v_I(nT_S) = \\tilde{a_I}(nT_S) * p(nT_S)\\quad (I-Waveform)$$ $$v_Q(nT_S) = \\tilde{a_Q}(nT_S) * p(nT_S)\\quad (Q-Waveform)$$\n그리고 Convolution 정의에 맞게 풀어 정리하면 아래와 같다.\n$$v_I(nT_S) = \\sum_{m=-\\infty}^{\\infty} a_I[m] \\cdot p\\big( n T_S - m T_M \\big)$$ $$v_Q(nT_S) = \\sum_{m=-\\infty}^{\\infty} a_Q[m] \\cdot p\\big( n T_S - m T_M \\big)$$\n3.7.1.4 Upconverter linkPulse Shaping필터를 거쳐 나온 I-Waveform과 Q-Waveform신호를 FFT하여 주파수 스펙트럼을 나타내면 아래와 같다.\n그림에서 확인할 수 있듯이 중심 주파수가 0이다. 이런 신호를 Baseband 신호로 표현한다. 실제 무선 통신에서는 Baseband 신호로 신호를 송신하면 많은 단점을 초래한다.\n따라서 중심 주파수를 높은 주파수로 옮기는 방식을 통해 Baseband 신호를 Passband 신호로 바꾼다. 이러한 과정을 Upconverter라고 표현한다.\n높은 주파수로 옮기기 위해 Baseband신호의 I-Waveform에 cos을 곱하고 Q-Waveform에 Sin을 곱한다. 이 때 Cos과 Sin이 갖는 주파수를 Carrier Frequency라고 한다.\n수식으로 $F_C$로 표현한다.\nPulse Shaping 이후의 신호에 Upconverter를 적용한 수식은 아래와 같다. 이 때 I신호와 Q신호는 더해서 복소수로 표현한다.\n$$s(nT_S) = v_I(nT_S)2^{1/2}cos2\\pi\\frac{F_C}{F_S}n-v_Q(nT_S)2^{1/2}sin2\\pi\\frac{F_C}{F_S}n$$\n$$s(nT_S) = v_I(nT_S)2^{1/2}cos2\\pi F_C nT_S-v_Q(nT_S)2^{1/2}sin2\\pi F_CnT_S$$\n위 신호는 Upconverter된 QAM 신호를 수식으로 표현했다.\nCarrier를 곱하는 과정에서 루트2를 곱하는 이유는 I심볼과 Q심볼의 에너지를 1로 유지하기 위함이다.\n3.7.1.5 DAC linkupconverted 된 QAM 송신 신호는 DAC를 거쳐 아날로그 신호로 변화한다. 식으로 나타내는 것은 간단하다 이산 시간 인덱스 $nT_S$를 연속 시간 $t$로 바꿔주면 된다.\n$$s(t) = v_I(t)2^{1/2}cos2\\pi F_C nt - v_Q(t)2^{1/2}sin2\\pi F_Cnt$$\n3.7.1.6 I-Waveform과 Q-Waveform의 관계 link우리는 연속된 비트 2개를 각각 I-Waveform과 Q-Waveform로 매핑했고, Pulse Shaping을 수행한 뒤, Upconverter를 통해 QAM 송신 신호를 만들었다.\n이러한 과정의 핵심은 병렬처리에 있다. 연속된 2개의 비트는 시간적으로 선후관계가 명확하다. 쉽게 말하면 처음 들어온 비트와 두 번째로 들어온 비트가 시간 간격을 두고 들어온다.\n그러나 QAM 변조를 위해 연속된 2개의 비트를 각각 I-Waveform과 Q-Waveform 심볼로 매핑해 같은 시간에 파형을 내보내 병렬 처리가 가능하다는 뜻이다.\n그러나 병렬로 처리하려면 I-Waveform과 Q-Waveform이 서로 영향을 줘서는 안된다. 아래 그림을 참고해보자.\n(a)그림은 I-Waveform과 Q-Waveform의 Pulse Shaping이후의 파형을 시간 축에서 나타낸 그림이다. 그림에서 알 수 있듯이 I-Waveform과 Q-Waveform은 복소평면에서 위상이 90도 차이를 보인다. 이러한 직교성을 활용하면 서로에 간섭없이 병렬처리가 가능하다는 것이다.\n우리는 3.7.4에서 최종 QAM 신호 $s(nT_S)$를 표현하기 위해서 I-Waveform과 Q-Waveform을 서로 더했다. 그 결과가 위 그림의 (c)다.\n그림상으로는 I-Waveform과 Q-Waveform이 뒤섞인 것처럼 보이지만 위상이 90도 차이를 보이기 때문에 수신기는 이들을 분리해 낼 수 있다.\n우리는 QAM 신호를 심볼을 활용하여 아래와 같이 다시 표현 가능하다.\n$$s(nT_S) = \\sum_{m=-\\infty}^{\\infty} a_I[m] \\cdot p\\big( n T_S - m T_M \\big)2^{1/2}cos2\\pi F_C nT_S-\\sum_{m=-\\infty}^{\\infty} a_Q[m] \\cdot p\\big( n T_S - m T_M \\big)2^{1/2}sin2\\pi F_CnT_S$$\n위 식을 삼각함수 합성 공식을 활용하여 정리하면 아래와 같이 표현 가능하다.\n$$s(nT_S) = \\sum_{m=-\\infty}^{\\infty} 2^{1/2} \\cdot \\sqrt{a_I(nT_S)^2 + a_Q(nT_S)^2} \\cdot \\cos\\left(2\\pi F_C nT_S + \\tan^{-1}\\left(-\\frac{a_Q(nT_S)}{a_I(nT_S)}\\right)\\right)$$\n삼각함수 합성결과 나온 식의 cos부분을 따로 쓰면 $$\\cos\\left(2\\pi F_C nT_S + \\tan^{-1}\\left(-\\frac{a_Q(nT_S)}{a_I(nT_S)}\\right)\\right)$$ 을 만족한다.\n이 cos 함수의 그래프를 그려보면 아래와 같다.\n그림에서 알 수 있듯 심볼레이트 $T_M$간격으로 위상이 급격하게 변화하는 것을 알 수 있다.\n3.7.1.6 PAM과 QAM의 관계 link 위 그림을 살펴보면 결국 QAM은 PAM의 심볼레이트를 2배 올린 변조 방식임을 알 수 있다.\n2배 빠른 심볼레이트를 처리하기 위해서 I-Waveform과 Q-Waveform을 만들어 병렬처리를 수행한다.\n3.7.2 QAM 수신기 구조 link이제 QAM Waveform을 수신할 차례다. QAM 수신기는 QAM 송신기의 역순으로 진행된다. 전체적인 구조는 아래 그림과 같다.\nQAM RF 송신 신호는 아래와 같다.\n$$s(t) = v_I(t)2^{1/2}cos2\\pi F_C nt - v_Q(t)2^{1/2}sin2\\pi F_Cnt$$\n3.7.2.1 ADC link이 신호를 ADC를 거쳐 아날로그 신호를 디지털 신호로 변환한다. 연속 시간 $t$를 이산 시간 $nT_S$로 바꿔 표현하면 된다.\n$$r(nT_S) = v_I(nT_S)2^{1/2}cos2\\pi F_C nT_S-v_Q(nT_S)2^{1/2}sin2\\pi F_CnT_S + w(t)$$\n그런데 한 가지 주목해야 할 점은 $w(t)$다. 이는 무선 환경에서 추가된 AWGN 노이즈를 나타낸다.\n3.7.2.2 Down-Converter link이제 Passband에 위치한 신호를 다시 Baseband신호로 내려줘야 한다. 이를 위해서 Up-Converter에서 곱했던 Cos신호와 Sin신호를 다시한 번 곱해준다.\nDown-Converter된 신호는 아래와 같다.\n식을 잘 살펴보면 Baseband 신호인 $v_I(nT_S)$와 $v_Q(nT_S)$가 보이고 그 뒤로 2배의 주파수 성분을 갖는 항이 추가되어 보인다.\n2배의 주파수 성분은 이후의 Matched Filtering을 통해 사라지게 된다.\nDown-Converter 이후의 신호를 $x_I(nT_S)와 x_Q(nT_S)$로 표현한다.\n3.7.2.3 Matched Filtering link 이제 RRC 필터와 컨볼루션을 수행해 Matched Filtering을 수행한다. 위 식에서 살펴보면\n2배의 주파수 성분 항은 Matched Filter를 거치면서 사라지게 된다. Matched Filtering의 주파수 응답은 Low-Pass Filter이기 때문에 가능하다.\nMatched Filtering 이후의 신호를 $z_I(nT_S)$ 와 $z_Q(nT_S)$로 표현한다.\n3.7.2.4 Decision of Symbol link이제 Up-Sampling된 신호에서 최적의 심볼에 해당하는 샘플을 추출하고 나머지는 버리는 과정을 수행한다. 이를 위해 Down-Sampling을 수행한다.\n아래 식을 참고해보자.\n$nT_S$ 디지털 신호를 $m_TM$ 심볼 속도로 다운 샘플링하여 최종 수신 심볼에 대한 식을 완성한다.\n이 떄 $r_p$는 SRRC의 Auto-Correlation결과이다. SRRC의 Auto-Correlation 결과는 No-ISI 조건을 만족하므로 심볼 간 간섭이 존재하지 않는다.\n따라서 위 식의 ISI항을 없앨 수 있다.\n그래서 최종 수신된 심볼은 $z_I(mT_M)$과 $z_Q(mT_M)$으로 표현 가능하다.\n3.7.3 가정 linkQAM 송/수신 구조를 분석하면서 누락한 가정들이 존재한다.\n3.7.3.1 Symbol Timing Offset link실제로 ADC가 신호를 변환할 때 송신 신호의 최적의 시작 시점을 샘플링하지 않는다. 이러한 오차는 SRRC 필터의 No-ISI 조건을 깨트린다. 따라서 이러한 Symbol Timing Offset에 대한 보정이 수신기에 추가로 필요하다.\n3.7.3.2 Resampling linkADC가 신호를 수신할 때 심볼의 정수배의 SampleRate로 신호를 변환하지 않는다. 따라서 실수배의 SampleRate를 갖는 신호를 정수배의 SampleRate로 Re-Sampling하는 과정이 필요하다.\n3.7.3.3 Carrier Frequency Offset link무선 환경에서 물체의 이동에 의해 발생하는 도플러효과가 존재한다. 또한 Up-Conversion과 Down-Conversion에 사용되는 오실레이터의 주파수 역시 완벽히 동일하지 않다. 여기서 발생하는 Carrier Freuqncy Offset을 보정해야 한다.\n3.7.3.4 Carrier Phase Offset link오실레이터의 시작 위상 역시 랜덤하다. 따라서 이러한 위상 차이를 보정해야 한다.\n3.7.3.5 Equalization link실제 무선 통신 환경에서는 AWGN 노이즈만 존재하는 것이 아니다. 다중 경로 페이딩에서 발생하는 심볼간 간섭을 보정하기 위한 블록이 필요하다.\n"
            }
        );
    index.add(
            {
                id:  21 ,
                href: "\/docs\/wireless_communication\/3_10_computing_error_rates\/",
                title: "3.10 Computing Error Rates",
                description: "How to configure Breadcrumb navigation for your Lotus Docs site.",
                content: "3.10 Computing Error Rates link디지털 통신 모뎀을 설계하고 나면 성능을 측정해야 한다. 가장 대표적인 성능 측정 방법으로는 BER(Bit-Error-Rate) 또는 SER(Symbol-Error-Rates)있다. BER 공식은 아래와 같다.\n3.10.1 SER 과 BER link 식은 간단하다. SER의 경우 에러가 난 심볼 개수를 전체 송신 심볼 개수로 나누면 된다.\nBER의 경우 에러나 난 비트 개수를 전체 송신 비트 개수로 나누면 된다.\n3.10.2 SNR linkSNR은 디지털 통신 모뎀의 성능을 측정할 때 가장 많이 사용되는 지표다. 정의는 신호 전력을 노이즈 전력으로 나눈 값이다.\n$$ SNR_{dB} = 10log{\\frac{P_M}{P_w}} = 10log{P_M}-10log{P_w} $$\n이 때 신호 전력 $P_M$은 평균 심볼 에너지 $E_M$을 심볼 시간 $T_M$으로 나눈 값이다.\n$$ P_M = \\frac{E_M}{T_M} $$\n아래 수신 신호에 대한 SNR을 나타내는 그림이다.\n스펙트럼에서 신호의 피크 전력과 노이즈 플로의 전력의 차이를 구하면 SNR을 구할 수 있다.\n3.10.3 EbNo linkEbNo 지표를 이해하기 위해서는 먼저 단위 대역폭 잡음 전력 $N_0$을 이해해야한다.\n$N_0$는 단위 대역폭 잡음 전력이고 단위는 W/Hz로 정의된다. 즉 대역폭을 나타내는 Hz당 잡음 전력을 의미한다.\n만약 노이즈 대역폭이 3Hz라면 노이즈 전력은 $3N_0$가 되는 것이다.\n즉 대역 노이즈의 전력은 $P_w = N_0B$를 만족한다.\nSNR과 EbNo의 관계에 대해 알아보자.\n$SNR = \\frac{P_M}{P_w} = \\frac{E_M}{T_M} \\frac{1}{N_0B} $ 이다.\n하나의 심볼을 구성하는 비트는 $log_2M$개 이므로 심볼 전력 $E_M$을 심볼을 구성하는 비트의 개수 $log_2M$으로 나누면 비트 전력 $E_b$가 나온다.\n$$E_b = \\frac{E_M}{log_2M} $$\n비트레이트 $R_b$는 심볼을 구성하는 비트의 개수를 심볼 시간으로 나눈 값이다.\n$$R_b = \\frac{log_2M}{T_M}$$\n위 식을 정리하면 EbNo 식이 도출된다.\n$$\\frac{E_b}{N_0} = SNR \\frac{B}{R_b} $$\n3.10.4 실제 웨이브폼에서 EbNo 계산하기 linkMATLAB에서 제공하는 변환 식이다. 참고하자.\n"
            }
        );
    index.add(
            {
                id:  22 ,
                href: "\/docs\/wireless_communication\/4_02_basic-componets-of-a-pll\/",
                title: "4.2 Basic Components of a PLL",
                description: "How to configure Breadcrumb navigation for your Lotus Docs site.",
                content: "4.2 PLL이란 linkPLL(Phase-Locked-Loop)는 말 그대로 위상을 고정하는 장치임을 의미한다.\n이게 통신 모뎀에서 왜 필요할까? 그것은 바로 무선 통신 환경에서 손상되는 송신 신호를 복구하여 수신 하기 위함이다.\n무선 통신 환경에서는 송신기와 수신기의 클럭이 독립적으로 동작한다. 만약 200MHz의 송신기 클럭과 200MHz의 수신기 클럭이 있다면 이 2개의 클럭이 과연 같을까?\n정답은 아니다. 우선 첫번째로 클럭의 시작 위상이 다를 수 있다.\n$V_1(t)$가 송신기 클럭이고 $V_2(t)$가 수신기 클럭이라고 하자.\n만약 데이터가 지연 시간 없이 전달된다고 가정한다면 시작 위상이 다르기 때문에 데이터를 수신하는 순간이 달라지게 된다. 따라서 데이터 시작 지점이 달라져 수신 불가능해진다.\n물론 지연 시간 없이 데이터가 전달 될 수도 없다. 언제 데이터가 수신기로 전달될지 모른다는 건 결국 클럭의 위상이 다르다는 것과 같다.\n또 다른 이유는 송신기의 200MHz와 수신기의 200MHz가 완벽히 동일한 200MHz가 아니다.\n세상에서 가장 정밀한 크리스탈로 만든 클럭도 0.000001Hz 정도의 오차가 존재한다.\n이러한 오차가 누적되면 데이터가 잘 수신되다가도 갑자기 끊어질 수 있다.\n이처럼 송신기와 수신기 사이에는 클럭의 오차 또는 무선 환경에 의한 노이즈 등 여러 이유 때문에 송신 신호와 수신 신호간 오차가 발생한다.\n이 오차를 줄이기 위해 필요한 것이 PLL이다. 오차를 입력으로 받아서 계속 Loop를 돌리면 최종적으로 수렴되는 오차가 존재한다. 이 최종 오차를 계산해 결정(=고정)하는 것이 PLL의 역할이다.\n그리고 최종 결정된 오차를 수신 신호에 보정해주면 우리는 오차를 극복하여 신호를 수신할 수 있다.\n4.2.1 PLL 기본 구조 (Input, Output) link 위 그림은 PLL의 기본 구조다. 천천히 단게별로 어떤 기능을 하는지 살펴보자.\n먼저 입력 신호(input)을 Cos 신호로 가정해보자.\n$$Input = Acos(2 \\pi \\frac{k}{N}n+\\theta[n])$$\n그리고 PLL의 초기 출력 신호 (output)을 아래와 같이 가정해보자.\n$$Input = Acos(2 \\pi \\frac{k}{N}n+\\hat{\\theta}[n])$$\n입력 신호와 출력 신호의 차이는 위상 $\\theta[n]$에 존재한다. 즉 입력 신호와 출력 신호의 위상 오차 $\\theta_e[n]$을 아래와 같이 정의할 수 있다.\n$$\\theta_e[n] = \\theta[n] - \\hat{\\theta}[n]$$\nPLL은 위상 오차 $\\hat{\\theta}[n]$을 입력으로 계속 받아서 최종적으로 수렴되는 오차를 구한뒤, 그 오차만큼을 출력 신호에 보정해주면 PLL은 입력 신호와 비슷한 출력 신호를 만들 수 있게 된다.\n4.2.2 PLL 기본 구조 (Phase Error Detector) linkPLL로 입력되는 신호와 PLL의 출력 신호와의 오차를 비교하는 블록이다.\nPLL의 Input 신호와 PLL의 Output신호를 서로 비교하여 위상 오차 $\\theta_D[n]$을 계속 만들어낸다.\n4.2.3 PLL 기본 구조 (Loop Filter) linkPhase Error Detector에서 탐지된 오차 $\\theta_D[n]$은 Loop Filter로 들어가게 된다.\n루프 필터는 “얼마나 큰 오차를” 또는 “얼마나 빨리 오차를” 수렴시킬지 결정할 수 있는 블록이다.\n루프필터를 거쳐 나온 위상 오차를 $\\theta_F[n]$으로 정의한다.\n시간이 지나면 $\\theta_F[n]$은 결국 특정 값으로 서서히 수렴되게 될 것이다.\n4.2.3 PLL 기본 구조 (NCO) link루프 필터를 거쳐 서서히 특정 값으로 수렴되는 오차 $\\theta_F[n]$을 입력으로 받아 주파수를 생성하는 오실레이터 모듈이다.\n위상 오차가 최종 수렴되면 NCO에서 나오는 Cos 신호는 Input 신호와 동일하게 바뀔 것이다.\n이럴 때 PLL은 잠금(Lock)되었다고 표현한다.\n4.3 Phase Error Detector linkPhase Error Detector에서는 PLL Input신호와 PLL Output신호의 위상 오차를 비교하는 블록이다.\n동작 매커니즘을 자세히 살펴보자.\n쉽게 생각하면 위상 오차를 비교하기 위해서 Input신호의 위상 $\\theta[n]$과 Output신호의 위상 $\\hat{\\theta}[n]$을 뺀 값이 위상 오차 $\\theta_D[n]$이라고 생각하기 쉽다.\n하지만 그렇게 간단하지 않다. 그 이유는 Input 신호가 비선형 신호일 때도 동작해야하기 때문이다.\n현재 가정을 들고 있는 Cos신호의 경우 위상 $\\theta[n]$이 선형적으로 변하더라도 Cos신호는 비선형적으로 변한다. PLL은 비선형 신호 안에 숨어 있는 선형으로 변하는 위상을 찾아내야한다.\n따라서 단순히 Input 신호의 위상과 Output 신호의 위상을 뺀 선형 오차를 계산한다면 오차를 정밀하게 추적할 수 없다.\n그래서 특정 비선형함수를 $f$를 거쳐 위상 오차를 추적한다.\n$$e_D[n] = f(\\theta[n]-\\hat{\\theta[n]}) $$\n그런데 우리는 구현을 하는 입장에서 이러한 비선형 함수를 다루기 까다로우므로 $f$를 선형 근사 시켜버린다.\n사실 이렇게 해도 큰 문제가 없는 이유는 PLL이 수렴해가는 과정에서 위상 오차 $e_D[n]$은 매우 작은 값이 될 것이고 결국 0이 된다.\n즉 비선형 곡선을 아주 짧게 보면 직선 처럼 보이듯이 선형 근사를 시켜도 크게 문제가 없다는 것이다. 아래 그림을 보면서 이해해보자.\n여기서 추가로 주목할 점은 위상 오차 $e_D[n]$이 0으로 수렴하기 위해 비선형 함수 $f$가 어떤 모양이어야 하는지 알아야 한다.\n이에 대한 답을 찾기 위해서 먼저 Phase Error Detector에서 탐지된 초기 오차 $\\theta_e[n]$이 양수라고 가정해보자. 그럼 아래와 같은 관계 식이 성립한다.\n식을 설명하면 $\\theta[n]-\\hat{\\theta}[n]$이 0보다 크므로 $\\hat{\\theta}[n]$이 커져야 한다.\n그러기 위해서는 $e_F[n]$, $e_D[n]$, $f(\\theta_e[n])$이 차례대로 커져야 한다.\n만약 초기 오차 $\\theta_e[n]$이 음수라면 반대로 $e_F[n]$, $e_D[n]$, $f(\\theta_e[n])$이 차례대로 작아져야 한다. 이러한 관계를 만족하는 비선형 함수 $f$는 아래와 같다.\n위 그림을 잘 살펴보면 $\\theta_e[n]$이 양수일 때 $\\theta_D[n]$은 0의 위쪽 방향에서 감소하는 방향으로 움직인다.\n반대로 $\\theta_e[n]$이 음수일 때 $\\theta_D[n]$은 0의 아래쪽 방향에서 증가하는 방향으로 움직인다.\n이러한 관계는 알파벳 S와 비슷하기 때문에 PLL의 S-Curve라고 부른다.\n정리하면 Phase Error Detector의 비선형 함수 $f$는 S-Curve형태를 띄어야 위상 오차를 정밀하게 추적할 수 있는 것이다.\n주목할 점은 $\\theta_D[n]$을 0으로 만들려고 하는 강도(세기)가 $\\theta_e[n]$에 따라 일정하지 않다는 점이다. 위 그림의 빨간색 화살표의 기울기가 $\\theta_D[n]$을 조정하는 세기가 된다.\n그리고 원점 부근에서 양의 기울기를 가져야한다는 점이다. 양의 기울기를 가질 때 위상 오차는 원점으로 수렴할 수 있게 된다.\n앞서 언급한대로 상대적으로 작은 위상 오차 $\\theta_e[n]$인 경우 S-curve는 기울기가 $K_D$인 직선으로 선형 근사 가능하다.\n$$ f(\\theta_e[n]) = K_D \\theta_e $$\n이것을 하드웨어로 구현하게 되면 단순 곱셈기로 구현할 수 있게 된다.\n선형 근사화된 Phase Error Detector의 모듈을 아래와 같이 다시 그릴 수 있다.\n4.4 Loop Filter linkLoop Filter에서는 Phase Error Detector에서 생성된 $\\theta_D[n]$을 입력으로 받아 최종 위상 오차로 수렴시키는 블록이다.\n루프 필터의 주 목표는 NCO에 최종 오차로 수렴되고 있는 위상 오차인 $\\theta_F[n]$을 제공하여 최종 위상 오차를 0으로 수렴시킨다.\n루프 필터의 다른 목표는 위상 오차내에 포함되어 있는 노이즈 및 고주파 성분을 제거하는 것이다. 위상 오차 내의 노이즈를 제거하여 정밀한 오차 추적을 가능하게 만든다.\n위상 오차내에 포함되어 있는 노이즈 성분을 줄이기 위해 루프 필터는 Proportional + Integrator (PI) 루프 필터 형태를 갖는다.\nProportional(비례) 필터는 현재의 에러성분을 바탕으로 Gain을 조절하는 부분이다. 만약 Phase Error Detector에서 출력된 위상 오차 $\\theta_D[n]$이 크다면, Proportional Gain을 크게 설정해서 루프 필터가 추정한 위상 오차 값을 더 빨리 키워 수렴 속도를 빠르게 하는 것이다.\n좀 더 쉽게 설명하자면 오차가 30이라면 10씩 3번 루프 필터를 돌면서 보정하는 것보다, 한 번에 30을 보정하는게 더 빨리 수렴하게 되는 것이다. 이 때의 Proportional Gain을 $K_P$로 정의한다.\n그리고 Proportional 필터의 출력을 아래와 같이 정의한다.\n$$e_{F,1}[n] = K_Pe_D[n]$$\n다음은 Integrator(적분) 필터는 미세한 오차를 보정하기 위해 존재한다.\n이전 루프에서 출력했던 위상 오차와 현재 루프에서 출력하는 위상 오차를 누적하면 미세한 오차가 보다 더 커질 것이고, 이 오차를 Integrator Gain $K_i$로 증폭시켜준다.\n즉 미세한 오차를 증폭시켜 잔여 위상 오차를 줄일 수 있게 된다. Integrator 필터의 출력을 아래와 같이 정의한다.\n$$e_{F,2}[n] = e_{F,2}[n-1] + K_ie_D[n]$$\n그리고 루프 필터의 최종 위상 오차 출력은 Proportional과 Integrator를 더한 위상 오차 값이다.\n$$e_F[n] = e_{F,1}[n] + e_{F,2}[n] $$\n아래 그림은 PLL의 루프 필터를 자세히 그린 PLL 전체 구조다.\n4.5 NCO (Numberically Controlled Oscillator) linkNCO는 직역하면 수치 제어 발진기다. 즉 발진기에 입력되는 숫자 값을 기반으로 동작한다.\n루프 필터에서 나온 수렴되고 있는 위상 오차를 입력으로 받으면 NCO에서 출력되는 발진 주파수는 서서히 Input 신호의 위상을 갖도록 바뀌게 되는 것이다.\nNCO는 크게 2개의 부분으로 구성된다. 아래 그림을 참고하자.\n이 그림은 NCO의 내부 구조이다. 크게 Phase Accumulator랑 LUT가 보인다.\n먼저 Phase Accumulator는 Loop Filter의 출력 위상 오차 $e_{F}[n]$을 바탕으로 PLL의 추정 위상인 $\\hat{\\theta}[n]$을 조정하는 부분이다.\n식 부터 살펴보자. $$ \\hat{\\theta}[n] = K_o \\sum_{i=-\\infty}^{n-1} e_F[i] \\quad \\quad mod \\ 2 \\pi $$\n수식을 보면 루프 필터에서 출력한 위상 오차를 계속 누적하고 있음을 알 수 있다. 오차를 계속해서 더해서 최종 위상 오차를 출력해 내는 것이다.\n이 때 $K_0$는 루프 필터가 출력한 위상 오차에 대해 얼마나 민감하게 반응할지를 결정한다. $K_0$가 크다면 보다 루프 필터가 출력한 위상 오차에 대해 민감하게 반응할 것이다.\n이럴 경우 수렴 속도는 빨라질 수 있지만 오차의 변동이 크다면 수렴 자체가 불가능할 수 있다.\n주목할 점은 $mod \\ 2 \\pi$다. 왜 $mod \\ 2 \\pi$로 나눗셈 연산을 진행하냐면 누적 위상의 범위가 $0 \\le \\hat{\\theta}[n] \\le 2 \\pi $면 충분하기 때문이다. 사인파든 코사인파든 위상이 360도 돌면 같은 위치기 떄문이다.\n다음은 LUT다. Phase Accumulator에서 출력된 위상 오차 $\\hat{\\theta}[n]$을 LUT의 입력으로 넣어주면 그 위상을 갖는 Cos과 Sin가 출력된다. 식은 아래와 같다. $$ \\ s_I[n] = \\cos \\hat{\\theta}[n] \\ $$ $$ \\ s_Q[n] = \\sin \\hat{\\theta}[n] $$\n4.5.1 최종 PLL 구조 linkPhase Error Detector, Loop Filter, NCO를 자세히 그려서 최종 PLL 블록 다이어그램을 그리면 아래와 같다.\n이러한 PLL구조는 추후 모뎀의 수신 동기화 알고리즘에 많이 활용된다.\n4.6 PLL 디자인 linkPLL을 구현하기 위해서 가장 먼저 결정해야 할 것은 루프 필터다. 루프 필터의 PI필터가 곧 PLL의 수렴 성능 및 속도를 결정하기 때문이다.\n"
            }
        );
    index.add(
            {
                id:  23 ,
                href: "\/docs\/terms\/pl_region\/",
                title: "PL",
                description: "PL영역이란 FPGA에서 HW 부분을 의미한다. Verilog 또는 VHDL로 HW 병렬처리 로직을 구현할 수 있는 영역이다.",
                content: ""
            }
        );
    index.add(
            {
                id:  24 ,
                href: "\/docs\/terms\/ps_region\/",
                title: "PS",
                description: "PS영역이란 FPGA에서 SW 부분을 의미한다. C/C++ 또는 Python으로 SW 어플리케이션을 구동할 수 있는 영역이다.",
                content: ""
            }
        );
    index.add(
            {
                id:  25 ,
                href: "\/docs\/terms\/wsl\/",
                title: "WSL",
                description: "WSL환경이란 윈도우 환경에서 프로그램을 이용하여 리눅스 환경을 구축하는 것이다. 임베디드 시스템을 구현할 때는 ubuntu 또는 vmware 프로그램을 활용하여 WSL 환경을 구축한다.",
                content: ""
            }
        );
    index.add(
            {
                id:  26 ,
                href: "\/docs\/",
                title: "Docs",
                description: "",
                content: ""
            }
        );
    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script>
        
    </body>
</html>
